C51 COMPILER V9.55   MAIN                                                                  07/15/2024 22:22:17 PAGE 1   


C51 COMPILER V9.55, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Program Files\Keil_v5\C51\BIN\C51.EXE main.c COMPACT OMF2 ROM(COMPACT) OPTIMIZE(9,SPEED) BROWSE 
                    -INCDIR(.\RA8889_01_Kernel) DEBUG PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          
   2          /************** RAIO Technology Inc. / Lcdvision Co., Ltd.***************
   3           * file     : main.c
   4           * author   : BW.SU
   5           * version  : V1.3
   6           * date     : 2024/07/01
   7           * brief    : STC8H8K64U + RA8889 ÑÝÊ¾´úÂëÖ÷³ÌÐò£¬MCUÍ¨ÐÅ½Ó¿Ú²ÉÓÃSPI-4
   8          ************************* bbs.lcdvision.com.cn **************************/
   9          
  10          #include "stc8h.h"       //°üº¬´ËÍ·ÎÄ¼þºó£¬²»ÐèÒªÔÙ°üº¬"reg51.h"Í·ÎÄ¼þ
  11          #include <intrins.h>
  12          
  13          /* µ¥Æ¬»ú¿ª·¢°åÏà¹Øº¯Êý */
  14          #include "MCU_Dev_Board.h"
  15          
  16          /* RA8889Í·ÎÄ¼þ */
  17          #include "RA8889_51.h"
  18          #include "RA8889_API_51.h"
  19          #include "RA8889_MCU_IF.h"
  20          #include "UserDef.h"
  21          #include "delay.h"
  22          
  23          /* FLASHÍ¼Æ¬µµÍ·ÎÄ¼þ */
  24          #include "flash.h"
  25          
  26          
  27          /**************************** È«¾Ö±äÁ¿ÉùÃ÷ ******************************/
  28          
  29          
  30          
  31          
  32          /*************************************************************************
  33          *                             º¯ÊýÉùÃ÷
  34          *************************************************************************/
  35          void Introduction (void);       //ÎÄ×Ö½éÉÜ
  36          void Geometry_Demo(void);       //¼¸ºÎ»æÍ¼ÑÝÊ¾
  37          void Show_BMP(void);            //µ÷ÓÃFLASHµÄBMPÍ¼Æ¬ÏÔÊ¾
  38          void Show_JPG(void);            //µ÷ÓÃFLASHµÄJPGÍ¼Æ¬ÏÔÊ¾
  39          void Fade_in_Fade_out(void);    //Í¼Æ¬µ­Èëµ­³öÑÝÊ¾
  40          void Show_AVI(void);            //µ÷ÓÃFLASHµÄAVIÓ°Æ¬²¥·Å
  41          void Show_PNG(void);            //µ÷ÓÃFLASHµÄPNGÍ¼Æ¬ÏÔÊ¾
  42          
  43          
  44          /*************************************************************************
  45            * @brief  Ö÷º¯Êý
  46            * @param  ÎÞ
  47            * @retval ÎÞ
  48            * @note   SPIÍ¨ÐÅ½Ó¿Ú£¬Òº¾§ÆÁÏÔÊ¾É«Éî¶¨ÒåÎª24bpp½øÐÐÑÝÊ¾
  49            ************************************************************************/
  50          void main()
  51          {
  52   1      
  53   1        P2M0 = 0xef; P2M1 = 0x00;   //P2.4£¨MISO£©ÉèÖÃÎªË«Ïò¿Ú£¬ÆäËüÎªÍÆÍìÄ£Ê½£¨Ê¹ÓÃP2.SPI£©
  54   1        P1M0 = 0xFF; P1M1 = 0x00;   //ÉèÖÃP1ÎªÍÆÍìÊä³öÄ£Ê½
C51 COMPILER V9.55   MAIN                                                                  07/15/2024 22:22:17 PAGE 2   

  55   1      
  56   1        
  57   1        /* ¿ªÊ¼£¬ÉÁË¸LED */
  58   1        LED2_FLASH();
  59   1        
  60   1        
  61   1        /* ¼ì²âSPIÍ¨ÐÅÊÇ·ñÕý³££¬Õý³£ÔòÉÁË¸LED2 */
  62   1      //  while(1) Comm_Test();
  63   1      
  64   1        
  65   1        /* SPI³õÊ¼»¯ */
  66   1        SPI4_Init();
  67   1      
  68   1        
  69   1        /* RA8889Ó²¼þ¸´Î» */
  70   1        RA8889_RST = 1;
  71   1        delay_ms(10);
  72   1        RA8889_RST = 0;
  73   1        delay_ms(10);
  74   1        RA8889_RST = 1;
  75   1      
  76   1      
  77   1        /* RA8889³õÊ¼»¯ */
  78   1        RA8889_Initial();
  79   1        
  80   1        
  81   1        /* Ñ­»·¹¦ÄÜÑÝÊ¾ */
  82   1        while(1)
  83   1        {
  84   2          Introduction();       //ÎÄ×Ö½éÉÜ
  85   2          Geometry_Demo();      //¼¸ºÎ»æÍ¼ÑÝÊ¾
  86   2          Show_BMP();           //µ÷ÓÃFLASHµÄBMPÍ¼Æ¬ÏÔÊ¾
  87   2          Show_JPG();           //µ÷ÓÃFLASHµÄJPGÍ¼Æ¬ÏÔÊ¾
  88   2          Fade_in_Fade_out();   //Í¼Æ¬µ­Èëµ­³öÑÝÊ¾
  89   2          Show_AVI();           //µ÷ÓÃFLASHµÄAVIÓ°Æ¬²¥·Å
  90   2          Show_PNG();           //µ÷ÓÃFLASHµÄPNGÍ¼Æ¬ÏÔÊ¾
  91   2        }
  92   1        
  93   1      }
  94          
  95          
  96          
  97          
  98          /*****************************************************************
  99            * @brief  ÎÄ×Ö½éÉÜ
 100            * @param  ÎÞ
 101            * @retval ÎÞ
 102            * @note   
 103            ****************************************************************/
 104          void Introduction (void)
 105          { 
 106   1        unsigned char i=3;
 107   1      
 108   1        /* ÆðÊ¼µØÖ·¡¢»­²¼Éè¶¨ */
 109   1      //  Main_Image_Start_Address(0);
 110   1      //  Main_Image_Width(canvas_image_width);             
 111   1      //  Canvas_Image_Start_address(0);
 112   1      //  Canvas_image_width(canvas_image_width);
 113   1        
 114   1        /* ÆðÊ¼×ø±ê¡¢µ±Ç°´°¿Ú¿í¸ßÉè¶¨ */
 115   1      //  Active_Window_XY(0,0);
 116   1      //  Active_Window_WH(LCD_Width,LCD_Height);
C51 COMPILER V9.55   MAIN                                                                  07/15/2024 22:22:17 PAGE 3   

 117   1        
 118   1        BTE_Solid_Fill(0,canvas_image_width,0,0,color16M_black,LCD_Width,LCD_Height);
 119   1        Draw_Square(color16M_green,0,0,LCD_Width-1,LCD_Height-1);
 120   1        
 121   1        Select_Font_Height_WxN_HxN_ChromaKey_Alignment(24,1,1,1,0);     //Éè¶¨ÎÄ×Ö¸ñÊ½
 122   1        Foreground_color_16M(color16M_white);
 123   1        Goto_Text_XY(124,30);
 124   1        Show_String("Solution: MCU 8051 + RA8889.");
 125   1        Goto_Text_XY(124,60);
 126   1        Show_String("RA8889 is an efficient TFT LCD CONTROLLER.");
 127   1        Goto_Text_XY(124,90);
 128   1        Show_String("It has an embedded decoder for JPG and AVI.");
 129   1        
 130   1        Draw_Square_Fill(color16M_red,124,180,124+150,180+200);
 131   1        Draw_Square_Fill(color16M_green,124+200,180,124+150+200,180+200);
 132   1        Draw_Square_Fill(color16M_blue,124+200+200,180,124+150+200+200,180+200);
 133   1        delay_ms(1000);
 134   1      
 135   1        BTE_Solid_Fill(0,canvas_image_width,0,0,color16M_black,LCD_Width,LCD_Height);
 136   1        
 137   1        Draw_Square_Fill(color16M_red,10,10,40,60);
 138   1        Draw_Square_Fill(color16M_green,50,10,80,60);
 139   1        Draw_Square_Fill(color16M_blue,90,10,120,60);
 140   1      
 141   1        Foreground_color_16M(color16M_white);
 142   1        
 143   1        /* ÕâÐ©´ò¿ª¿ÉÄÜ»á³¬³öµ¥Æ¬»úµÄRAM£¬µ¼ÖÂÏÔÊ¾ÂÒÂë£¬ÔÝÊ±ÆÁ±Î */
 144   1        Goto_Text_XY(10,24*i++);
 145   1        Show_String("RA8889 is a low power TFT controller with powerful display");
 146   1        Goto_Text_XY(10,24*i++);
 147   1        Show_String("functions and build-in internal SDRAM memory. In order to quickly");
 148   1        Goto_Text_XY(10,24*i++);
 149   1        Show_String("refresh the screen content with the display memory. RA8889");
 150   1        Goto_Text_XY(10,24*i++);
 151   1        Show_String("provides not only parallel 8080/6800 and 8/16-bit MCU interface,");
 152   1        Goto_Text_XY(10,24*i++);
 153   1        Show_String("but also 3/4 wire SPI and IIC serial interface. Plenty powerful");
 154   1        Goto_Text_XY(10,24*i++);
 155   1        Show_String("functions are provides from RA8889, such as multiple display");
 156   1        Goto_Text_XY(10,24*i++);
 157   1        Show_String("buffers, Picture-in-Picture,transparency control,display with");
 158   1        Goto_Text_XY(10,24*i++);
 159   1        Show_String("rotation & mirror, and build-in JPEG and AVI decoder.");
 160   1      
 161   1      
 162   1        Select_Font_Height_WxN_HxN_ChromaKey_Alignment(24,2,2,1,0);     //Éè¶¨ÎÄ×Ö¸ñÊ½£¬·Å´óÁ½±¶
 163   1      
 164   1        i+=3;
 165   1        Goto_Text_XY(10,300);
 166   1        Foreground_color_16M(color16M_yellow);
 167   1        Show_String("Contact us:");
 168   1        Goto_Text_XY(10,350);
 169   1        Show_String("Wechat/QQ: 598076690");
 170   1        Goto_Text_XY(10,400);
 171   1        Show_String("BBS: bbs.lcdvision.com.cn");
 172   1      
 173   1        delay_ms(1000);
 174   1      }
 175          
 176          
 177          /*****************************************************************
 178            * @brief  »æÖÆ¼¸ºÎÍ¼ÐÎÑÝÊ¾
C51 COMPILER V9.55   MAIN                                                                  07/15/2024 22:22:17 PAGE 4   

 179            * @param  ÎÞ
 180            * @retval ÎÞ
 181            * @note   
 182            ****************************************************************/
 183          void Geometry_Demo(void)
 184          {
 185   1        BTE_Solid_Fill(0,canvas_image_width,0,0,color16M_black,LCD_Width,LCD_Height);
 186   1        Foreground_color_16M(color16M_purple);
 187   1        Select_Font_Height_WxN_HxN_ChromaKey_Alignment(24,2,2,1,0);     //Éè¶¨ÎÄ×Ö¸ñÊ½£¬·Å´óÁ½±¶
 188   1        Goto_Text_XY(10,10);
 189   1        Show_String("Geometry drawing.");
 190   1        delay_ms(500);
 191   1        
 192   1        Foreground_color_65k(0x0);
 193   1        Square_Start_XY(0,0);
 194   1        Square_End_XY(LCD_Width-1,LCD_Height-1);
 195   1        Start_Square_Fill();
 196   1        
 197   1        Draw_Line(color16M_purple,10,10,799-10,479-10);
 198   1        Draw_Line(color16M_purple,11,11,799-11,479-11);
 199   1      
 200   1        Draw_Triangle(color16M_red,50,0,50,100,150,100);
 201   1        Draw_Triangle_Fill(color16M_green,200,0,200,100,300,100);
 202   1      
 203   1        Draw_Circle(color16M_blue,400,50,50);
 204   1        Draw_Circle_Fill(color16M_white,550,50,50);
 205   1        
 206   1        Draw_Ellipse(color16M_yellow,100,200,100,50); 
 207   1        Draw_Ellipse_Fill(color16M_purple,350,200,100,50);
 208   1        
 209   1        Draw_Left_Up_Curve(color16M_blue,550,190,50,50);
 210   1        Draw_Right_Down_Curve(color16M_white,560,200,50,50);
 211   1        Draw_Right_Up_Curve(color16M_red,560,190,50,50);
 212   1        Draw_Left_Down_Curve(color16M_yellow,550,200,50,50);
 213   1      
 214   1        Draw_Left_Up_Curve_Fill(color16M_blue,700,190,50,50);
 215   1        Draw_Right_Down_Curve_Fill(color16M_white,710,200,50,50);
 216   1        Draw_Right_Up_Curve_Fill(color16M_red,710,190,50,50);
 217   1        Draw_Left_Down_Curve_Fill(color16M_yellow,700,200,50,50);
 218   1        
 219   1        Draw_Square(color16M_red,50,300,150,400);         
 220   1        Draw_Square_Fill(color16M_red,200,300,300,400);
 221   1        
 222   1        Draw_Circle_Square(color16M_purple,450,300,550,400,10,10);
 223   1        Draw_Circle_Square_Fill(color16M_green,600,300,700,400,10,10);
 224   1        
 225   1        delay_ms(1000);
 226   1      
 227   1      } 
 228          
 229          
 230          /*****************************************************************
 231            * @brief  µ÷ÓÃFLASHµÄBMPÍ¼Æ¬ÏÔÊ¾
 232            * @param  ÎÞ
 233            * @retval ÎÞ
 234            * @note   Ñ­»·ÏÔÊ¾BMPÍ¼Æ¬
 235            ****************************************************************/
 236          void Show_BMP (void)
 237          {
 238   1        unsigned char n;
 239   1        
 240   1        BTE_Solid_Fill(0,canvas_image_width,0,0,color16M_black,LCD_Width,LCD_Height);
C51 COMPILER V9.55   MAIN                                                                  07/15/2024 22:22:17 PAGE 5   

 241   1        Foreground_color_16M(color16M_red);
 242   1        Select_Font_Height_WxN_HxN_ChromaKey_Alignment(24,2,2,1,0);     //Éè¶¨ÎÄ×Ö¸ñÊ½£¬·Å´óÁ½±¶
 243   1        Goto_Text_XY(10,10);
 244   1        Show_String("Showing picture of BMP format.");
 245   1        Goto_Text_XY(10,60);
 246   1        Show_String("DMA BMP: FLASH->DISPLAY RAM");
 247   1        delay_ms(1000);
 248   1        
 249   1        SPI_NOR_initial_DMA (3,BUS0,CS1,1,0);       //Æ¬Ñ¡BUS0,CS1 £¨×¢Òâ£º³õÊ¼»¯º¯ÊýBMPºÍJPGµÄ²»Í¬£©
 250   1      
 251   1        //µÚ1~3ÕÅÊÇBMPÍ¼Æ¬
 252   1        for(n=0;n<3;n++)
 253   1        {   
 254   2          DMA_24bit(2,0,0,800,480,BINARY_INFO[n].img_width,BINARY_INFO[n].start_addr);
 255   2          delay_ms(100);
 256   2        }
 257   1        
 258   1        delay_ms(1000);
 259   1      }
 260          
 261          
 262          /*****************************************************************
 263            * @brief  µ÷ÓÃFLASHµÄJPGÍ¼Æ¬ÏÔÊ¾
 264            * @param  ÎÞ
 265            * @retval ÎÞ
 266            * @note   Ñ­»·ÏÔÊ¾JPGÍ¼Æ¬£¬ÏÔÊ¾ËÙ¶È³¬¼«¿ì
 267            ****************************************************************/
 268          void Show_JPG (void)
 269          {
 270   1        unsigned char n;
 271   1        
 272   1        BTE_Solid_Fill(0,canvas_image_width,0,0,color16M_black,LCD_Width,LCD_Height);
 273   1        Foreground_color_16M(color16M_green);
 274   1        Select_Font_Height_WxN_HxN_ChromaKey_Alignment(24,2,2,1,0);     //Éè¶¨ÎÄ×Ö¸ñÊ½£¬·Å´óÁ½±¶
 275   1        Goto_Text_XY(10,10);
 276   1        Show_String("Showing picture of JPG format.");
 277   1        Goto_Text_XY(10,60);
 278   1        Show_String("DMA JPG: FLASH->DISPLAY RAM");
 279   1        delay_ms(1000);
 280   1        
 281   1        SPI_NOR_initial_JPG_AVI(1,0,BUS0,CS1,1);          //Æ¬Ñ¡BUS0,CS1
 282   1        
 283   1        //µÚ4~8ÕÅÊÇJPGÍ¼Æ¬
 284   1        for(n=3;n<8;n++)
 285   1        {
 286   2          JPG_NOR(BINARY_INFO[n].start_addr,BINARY_INFO[n].img_size,canvas_image_width,0,0);
 287   2          delay_ms(300);
 288   2        }
 289   1        
 290   1        delay_ms(1000);
 291   1      }
 292          
 293          
 294          /*****************************************************************
 295            * @brief  Í¼Æ¬µ­Èëµ­³öÑÝÊ¾
 296            * @param  ÎÞ
 297            * @retval ÎÞ
 298            * @note   µ÷³ö2ÕÅÍ¼Æ¬´æ·ÅÔÚ(0,480)ºÍ(800,480)´¦£¬½øÐÐÍ¼Æ¬¹ý¶ÈÏÔÊ¾
 299            ****************************************************************/
 300          void Fade_in_Fade_out (void)
 301          {
 302   1        unsigned char n,a;
C51 COMPILER V9.55   MAIN                                                                  07/15/2024 22:22:17 PAGE 6   

 303   1        
 304   1        BTE_Solid_Fill(0,canvas_image_width,0,0,color16M_black,LCD_Width,LCD_Height);
 305   1        Foreground_color_16M(color16M_green);
 306   1        Select_Font_Height_WxN_HxN_ChromaKey_Alignment(24,2,2,1,0);     //Éè¶¨ÎÄ×Ö¸ñÊ½£¬·Å´óÁ½±¶
 307   1        Goto_Text_XY(10,10);
 308   1        Show_String("Fade in & fade out.");
 309   1        delay_ms(1000);
 310   1        
 311   1        SPI_NOR_initial_JPG_AVI(1,0,BUS0,CS1,1);          //Æ¬Ñ¡BUS0,CS1
 312   1      
 313   1        //µÚ4~8ÕÅÊÇJPGÍ¼Æ¬£¬Ñ­»·µ÷³ö2ÕÅ²¢½øÐÐ¹ý¶ÉÇÐ»»ÑÝÊ¾
 314   1        for(n=3;n<7;n++)
 315   1        {
 316   2          JPG_NOR(BINARY_INFO[n].start_addr,BINARY_INFO[n].img_size,canvas_image_width,0,480);
 317   2          JPG_NOR(BINARY_INFO[n+1].start_addr,BINARY_INFO[n+1].img_size,canvas_image_width,800,480);
 318   2          
 319   2          for(a=0;a<=32;a=a+2)
 320   2          {
 321   3            BTE_Alpha_Blending_Picture_Mode(0,canvas_image_width,0,480,0,canvas_image_width,800,480,0,canvas_image_
             -width, 0,0,800,480,a);
 322   3          }
 323   2        }
 324   1        
 325   1        delay_ms(1000);
 326   1      }
 327          
 328          
 329          /*****************************************************************
 330            * @brief  µ÷ÓÃFLASHµÄAVIÓ°Æ¬²¥·Å
 331            * @param  ÎÞ
 332            * @retval ÎÞ
 333            * @note   ²¥·ÅÒ»¶ÎAVIÓ°Æ¬£¬³ß´ç600x250£¬¾ÓÖÐÏÔÊ¾
 334            ****************************************************************/
 335          void Show_AVI (void)
 336          {
 337   1        unsigned char temp;
 338   1        
 339   1        BTE_Solid_Fill(0,canvas_image_width,0,0,color16M_black,LCD_Width,LCD_Height);
 340   1        Foreground_color_16M(color16M_white);
 341   1        Select_Font_Height_WxN_HxN_ChromaKey_Alignment(24,2,2,1,0);     //Éè¶¨ÎÄ×Ö¸ñÊ½£¬·Å´óÁ½±¶
 342   1        Goto_Text_XY(10,10);
 343   1        Show_String("Playing AVI video.");
 344   1      
 345   1        SPI_NOR_initial_JPG_AVI(1,0,BUS0,CS1,1);          //Æ¬Ñ¡BUS0,CS1
 346   1        
 347   1        AVI_NOR(BINARY_INFO[10].start_addr,BINARY_INFO[10].img_size,shadow_buff,shadow_buff+2400,(LCD_Width-600)/
             -2,(LCD_Height-250)/2,250,600,canvas_image_width);
 348   1        AVI_window(1);
 349   1        
 350   1        do{ 
 351   2            temp = Read_Media_Decode_Busy();  //read busy flag to know media decode busy or idle
 352   2        }while(temp&0x40);
 353   1        AVI_window(0);
 354   1      }
 355          
 356          
 357          /*****************************************************************
 358            * @brief  µ÷ÓÃFLASHµÄPNGÍ¼Æ¬ÏÔÊ¾
 359            * @param  ÎÞ
 360            * @retval ÎÞ
 361            * @note   ÏÔÊ¾PNGÍ¼Æ¬£¬Í¬Ê±¸¡¶¯PNG
 362            ****************************************************************/
C51 COMPILER V9.55   MAIN                                                                  07/15/2024 22:22:17 PAGE 7   

 363          void Show_PNG (void)
 364          {
 365   1        unsigned short n,x,y,dir_x,dir_y;
 366   1        
 367   1        BTE_Solid_Fill(0,canvas_image_width,0,0,color16M_black,LCD_Width,LCD_Height);
 368   1        Foreground_color_16M(color16M_green);
 369   1        Select_Font_Height_WxN_HxN_ChromaKey_Alignment(24,2,2,1,0);     //Éè¶¨ÎÄ×Ö¸ñÊ½£¬·Å´óÁ½±¶
 370   1        Goto_Text_XY(10,10);
 371   1        Show_String("Showing picture of PNG format.");
 372   1        delay_ms(1000);
 373   1      
 374   1        SPI_NOR_initial_JPG_AVI(1,0,BUS0,CS1,1);          //Æ¬Ñ¡BUS0,CS1
 375   1        JPG_NOR(BINARY_INFO[3].start_addr,BINARY_INFO[3].img_size,canvas_image_width,0,0);      //Layer0 Ö÷»­Ãæ
 376   1        JPG_NOR(BINARY_INFO[3].start_addr,BINARY_INFO[3].img_size,canvas_image_width,0,480);    //Layer1 Ö÷»­Ãæ·ÅÔÚ
             -×ó²à
 377   1        JPG_NOR(BINARY_INFO[3].start_addr,BINARY_INFO[3].img_size,canvas_image_width,800,480);  //Layer1 Ö÷»­Ãæ·ÅÔ
             -ÚÓÒ²à
 378   1      
 379   1        SPI_NOR_initial_DMA (4,BUS0,CS1,1,0);       //Æ¬Ñ¡BUS0,CS1 £¨×¢Òâ£º³õÊ¼»¯º¯ÊýBMPºÍJPGµÄ²»Í¬£©
 380   1        SPI_NOR_DMA_png (BINARY_INFO[8].start_addr,Layer4,0,BINARY_INFO[8].img_width,BINARY_INFO[8].img_height);  
             -  //½«µÚ8ÕÅ£¬PNGÍ¼Æ¬Êý¾ÝÏÈDMA·Åµ½Layer4»º´æ
 381   1        
 382   1        x=123;
 383   1        y=218;      
 384   1        dir_x=1;  //PNGÒÆ¶¯·½Ïò£º0:µÝ¼õ£¬1£ºµÝ½ø
 385   1        dir_y=1;  //PNGÒÆ¶¯·½Ïò£º0:µÝ¼õ£¬1£ºµÝ½ø
 386   1        
 387   1        for(n=0;n<300;n++)
 388   1        {
 389   2          //À´Ô´0=JPG±³¾°Í¼Æ¬   À´Ô´1=PNGÊý¾Ý
 390   2          BTE_alpha_blending_32bit_Pixel_mode(BINARY_INFO[8].img_width,BINARY_INFO[8].img_width,BINARY_INFO[8].img
             -_height,x,y,Layer1,canvas_image_width,x,y,Layer1,canvas_image_width,Layer4);  //(S0X,S0Y)<--ÏàÍ¬×ø±ê-->(desX,desY)£¬PNGÕ¹
             -¿ª·ÅÔÚLayer1(x,y)
 391   2          BTE_Memory_Copy(Layer1,canvas_image_width,0,0,0,canvas_image_width,0,0,Layer0,canvas_image_width,0,0,0x0
             -C,800,480);        //½«Layer1(0,0) -> Layer0(0,0) Ö÷»­Ãæµþ¼ÓÁËPNGÍ¼Æ¬ºócopy
 392   2          BTE_Memory_Copy(Layer1,canvas_image_width,800,0,0,canvas_image_width,0,0,Layer1,canvas_image_width,0,0,0
             -x0C,800,480);      //½«Layer1(800,0) -> Layer1(0,0) »Ö¸´µ×Í¼
 393   2      
 394   2          //xÏòµÝÔöºÍµÝ¼õ
 395   2          if(dir_x==1 && x<800-400)
 396   2          {
 397   3            x++;
 398   3            if(x==800-400-1)  dir_x=0;
 399   3          }
 400   2          else if(dir_x==0 && x>0)
 401   2          {
 402   3            x--;
 403   3            if(x==0)  dir_x=1;
 404   3          }   
 405   2          
 406   2          //yÏòµÝÔöºÍµÝ¼õ
 407   2          if(dir_y==1 && y<480-100)
 408   2          {
 409   3            y++;
 410   3            if(y==480-100-1)  dir_y=0;
 411   3          }
 412   2          else if(dir_y==0 && y>0)
 413   2          {
 414   3            y--;
 415   3            if(y==0)  dir_y=1;
 416   3          }
 417   2        } 
C51 COMPILER V9.55   MAIN                                                                  07/15/2024 22:22:17 PAGE 8   

 418   1        
 419   1      }
 420          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2896    ----
   CONSTANT SIZE    =    871    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =    154      15
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
