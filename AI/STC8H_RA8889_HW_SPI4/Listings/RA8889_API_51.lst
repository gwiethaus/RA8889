C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 1   


C51 COMPILER V9.55, COMPILATION OF MODULE RA8889_API_51
OBJECT MODULE PLACED IN .\Objects\RA8889_API_51.obj
COMPILER INVOKED BY: D:\Program Files\Keil_v5\C51\BIN\C51.EXE RA8889_01_Kernel\RA8889_API_51.c COMPACT OMF2 ROM(COMPACT)
                    - OPTIMIZE(9,SPEED) BROWSE INCDIR(.\RA8889_01_Kernel) DEBUG PRINT(.\Listings\RA8889_API_51.lst) TABS(2) OBJECT(.\Objects\
                    -RA8889_API_51.obj)

line level    source

   1          
   2          /************** RAIO Technology Inc. / Lcdvision Co., Ltd.***************
   3           * file     : RA8889_API_51.c
   4           * author   : BW.SU
   5           * version  : V1.3
   6           * date     : 2024/07/01
   7           * brief    :
   8           *          （1）延时函数，原代码所有us级别全部改为ms级别
   9           *          （2）将特定关键字data修改为data_array
  10           *          （3）NAND FLASH功能函数移植起来相对复杂，暂时屏蔽
  11           *          （4）删除调用自建ASCII字库的相关函数
  12            *         （5）修正部份函数，8位机计算整型变量可能会溢出，改为长整型
  13          ************************* bbs.lcdvision.com.cn **************************/
  14          
  15          #include "stc8h.h"       //包含此头文件后，不需要再包含"reg51.h"头文件
  16          #include <intrins.h>
  17          #include <stdio.h>
  18          
  19          /* RA8889头文件 */
  20          #include "RA8889_51.h"
  21          #include "RA8889_API_51.h"
  22          #include "RA8889_MCU_IF.h"
  23          #include "UserDef.h"
  24          #include "delay.h"
  25          
  26          
  27          
  28          /*================================================================*/
  29          //                  CUSTOMER LEVEL API FUNCTIONS  
  30          /*================================================================*/
  31          
  32          void MPU8_8bpp_Memory_Write(
  33              unsigned short x // x of coordinate
  34              ,
  35              unsigned short y // y of coordinate
  36              ,
  37              unsigned short w // width
  38              ,
  39              unsigned short h // height
  40              ,
  41              const unsigned char *data_array // 8bit data
  42          )
  43          {
  44   1          unsigned short i, j;
  45   1          Graphic_Mode();
  46   1          Active_Window_XY(x, y);
  47   1          Active_Window_WH(w, h);
  48   1          Goto_Pixel_XY(x, y);
  49   1          LCD_CmdWrite(0x04);
  50   1          for (i = 0; i < h; i++) {
  51   2              for (j = 0; j < w; j++) {
  52   3                  Check_Mem_WR_FIFO_not_Full();
  53   3                  LCD_DataWrite(*data_array);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 2   

  54   3                  data_array++;
  55   3              }
  56   2          }
  57   1          Check_Mem_WR_FIFO_Empty();
  58   1      }
  59          
  60          void MPU8_16bpp_Memory_Write(
  61              unsigned short x // x of coordinate
  62              ,
  63              unsigned short y // y of coordinate
  64              ,
  65              unsigned short w // width
  66              ,
  67              unsigned short h // height
  68              ,
  69              const unsigned char *data_array // 8bit data
  70          )
  71          {
  72   1          unsigned short i, j;
  73   1          Graphic_Mode();
  74   1          Active_Window_XY(x, y);
  75   1          Active_Window_WH(w, h);
  76   1          Goto_Pixel_XY(x, y);
  77   1          LCD_CmdWrite(0x04);
  78   1          for (i = 0; i < h; i++) {
  79   2              for (j = 0; j < w; j++) {
  80   3                  Check_Mem_WR_FIFO_not_Full();
  81   3                  LCD_DataWrite(*data_array);
  82   3                  data_array++;
  83   3                  Check_Mem_WR_FIFO_not_Full();
  84   3                  LCD_DataWrite(*data_array);
  85   3                  data_array++;
  86   3              }
  87   2          }
  88   1          Check_Mem_WR_FIFO_Empty();
  89   1      }
  90          
  91          void MPU8_24bpp_Memory_Write(
  92              unsigned short x // x of coordinate
  93              ,
  94              unsigned short y // y of coordinate
  95              ,
  96              unsigned short w // width
  97              ,
  98              unsigned short h // height
  99              ,
 100              const unsigned char *data_array // 8bit data
 101          )
 102          
 103          {
 104   1          unsigned short i, j;
 105   1          Graphic_Mode();
 106   1          Active_Window_XY(x, y);
 107   1          Active_Window_WH(w, h);
 108   1          Goto_Pixel_XY(x, y);
 109   1          LCD_CmdWrite(0x04);
 110   1          for (i = 0; i < h; i++) {
 111   2              for (j = 0; j < w; j++) {
 112   3                  Check_Mem_WR_FIFO_not_Full();
 113   3                  LCD_DataWrite(*data_array);
 114   3                  data_array++;
 115   3                  Check_Mem_WR_FIFO_not_Full();
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 3   

 116   3                  LCD_DataWrite(*data_array);
 117   3                  data_array++;
 118   3                  Check_Mem_WR_FIFO_not_Full();
 119   3                  LCD_DataWrite(*data_array);
 120   3                  data_array++;
 121   3              }
 122   2          }
 123   1          Check_Mem_WR_FIFO_Empty();
 124   1      }
 125          
 126          void MPU16_16bpp_Memory_Write(
 127              unsigned short x // x of coordinate
 128              ,
 129              unsigned short y // y of coordinate
 130              ,
 131              unsigned short w // width
 132              ,
 133              unsigned short h // height
 134              ,
 135              const unsigned short *data_array // 16bit data
 136          )
 137          {
 138   1          unsigned short i, j;
 139   1          Graphic_Mode();
 140   1          Active_Window_XY(x, y);
 141   1          Active_Window_WH(w, h);
 142   1          Goto_Pixel_XY(x, y);
 143   1          LCD_CmdWrite(0x04);
 144   1          for (i = 0; i < h; i++) {
 145   2              for (j = 0; j < w; j++) {
 146   3                  Check_Mem_WR_FIFO_not_Full();
 147   3                  LCD_DataWrite(*data_array);
 148   3                  data_array++;
 149   3              }
 150   2          }
 151   1          Check_Mem_WR_FIFO_Empty();
 152   1      }
 153          
 154          void MPU16_24bpp_Mode1_Memory_Write(
 155              unsigned short x // x of coordinate
 156              ,
 157              unsigned short y // y of coordinate
 158              ,
 159              unsigned short w // width
 160              ,
 161              unsigned short h // height
 162              ,
 163              const unsigned short *data_array // 16bit data
 164          )
 165          {
 166   1          unsigned short i, j;
 167   1          Graphic_Mode();
 168   1          Active_Window_XY(x, y);
 169   1          Active_Window_WH(w, h);
 170   1          Goto_Pixel_XY(x, y);
 171   1          LCD_CmdWrite(0x04);
 172   1          for (i = 0; i < h; i++) {
 173   2              for (j = 0; j < w / 2; j++) {
 174   3                  LCD_DataWrite(*data_array);
 175   3                  Check_Mem_WR_FIFO_not_Full();
 176   3                  data_array++;
 177   3                  LCD_DataWrite(*data_array);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 4   

 178   3                  Check_Mem_WR_FIFO_not_Full();
 179   3                  data_array++;
 180   3                  LCD_DataWrite(*data_array);
 181   3                  Check_Mem_WR_FIFO_not_Full();
 182   3                  data_array++;
 183   3              }
 184   2          }
 185   1          Check_Mem_WR_FIFO_Empty();
 186   1      }
 187          
 188          void MPU16_24bpp_Mode2_Memory_Write(
 189              unsigned short x // x of coordinate
 190              ,
 191              unsigned short y // y of coordinate
 192              ,
 193              unsigned short w // width
 194              ,
 195              unsigned short h // height
 196              ,
 197              const unsigned short *data_array // 16bit data
 198          )
 199          {
 200   1          unsigned short i, j;
 201   1          Graphic_Mode();
 202   1          Active_Window_XY(x, y);
 203   1          Active_Window_WH(w, h);
 204   1          Goto_Pixel_XY(x, y);
 205   1          LCD_CmdWrite(0x04);
 206   1          for (i = 0; i < h; i++) {
 207   2              for (j = 0; j < w; j++) {
 208   3                  Check_Mem_WR_FIFO_not_Full();
 209   3                  LCD_DataWrite(*data_array);
 210   3                  data_array++;
 211   3                  Check_Mem_WR_FIFO_not_Full();
 212   3                  LCD_DataWrite(*data_array);
 213   3                  data_array++;
 214   3              }
 215   2          }
 216   1          Check_Mem_WR_FIFO_Empty();
 217   1      }
 218          
 219          void PIP(
 220              unsigned char On_Off // 0 : disable PIP, 1 : enable PIP, 2 : To maintain the original state
 221              ,
 222              unsigned char Select_PIP // 1 : use PIP1 , 2 : use PIP2
 223              ,
 224              unsigned long PAddr // start address of PIP
 225              ,
 226              unsigned short XP // coordinate X of PIP Window, It must be divided by 4.
 227              ,
 228              unsigned short YP // coordinate Y of PIP Window, It must be divided by 4.
 229              ,
 230              unsigned long ImageWidth // Image Width of PIP (recommend = canvas image width)
 231              ,
 232              unsigned short X_Dis // coordinate X of Display Window
 233              ,
 234              unsigned short Y_Dis // coordinate Y of Display Window
 235              ,
 236              unsigned short X_W // width of PIP and Display Window, It must be divided by 4.
 237              ,
 238              unsigned short Y_H // height of PIP and Display Window , It must be divided by 4.
 239          )
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 5   

 240          {
 241   1          if (Select_PIP == 1) {
 242   2              Select_PIP1_Parameter();
 243   2          }
 244   1          if (Select_PIP == 2) {
 245   2              Select_PIP2_Parameter();
 246   2          }
 247   1          PIP_Display_Start_XY(X_Dis, Y_Dis);
 248   1          PIP_Image_Start_Address(PAddr);
 249   1          PIP_Image_Width(ImageWidth);
 250   1          PIP_Window_Image_Start_XY(XP, YP);
 251   1          PIP_Window_Width_Height(X_W, Y_H);
 252   1      
 253   1          if (On_Off == 0) {
 254   2              if (Select_PIP == 1) {
 255   3                  Disable_PIP1();
 256   3              }
 257   2              if (Select_PIP == 2) {
 258   3                  Disable_PIP2();
 259   3              }
 260   2          }
 261   1      
 262   1          if (On_Off == 1) {
 263   2              if (Select_PIP == 1) {
 264   3                  Enable_PIP1();
 265   3              }
 266   2              if (Select_PIP == 2) {
 267   3                  Enable_PIP2();
 268   3              }
 269   2          }
 270   1      }
 271          
 272          /*internal font
 273          x : Print font start coordinate of X
 274          y : Print font start coordinate of Y
 275          X_W : active window width
 276          Y_H : active window height
 277          FontColor : Set Font Color
 278          BackGroundColor : Set Font BackGround Color
 279          Font Color and BackGround Color dataformat :
 280          ColorDepth_8bpp : R3G3B2
 281          ColorDepth_16bpp : R5G6B5
 282          ColorDepth_24bpp : R8G8B8
 283          tmp2 : Hex variable you want print (range : 0 ~ 32bit)
 284          */
 285          void Print_Internal_Font_Hexvariable(unsigned short x, unsigned short y, unsigned short X_W, unsigned shor
             -t Y_H, unsigned long FontColor, unsigned long BackGroundColor, unsigned int tmp2)
 286          {
 287   1          Text_Mode();
 288   1          CGROM_Select_Internal_CGROM();
 289   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(FontColor);
                  Background_color_256(BackGroundColor);
              #endif
 293   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 297   1      #ifdef MCU_8bit_ColorDepth_24bpp
 298   1          Foreground_color_16M(FontColor);
 299   1          Background_color_16M(BackGroundColor);
 300   1      #endif
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 6   

 301   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 305   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 309   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 313   1          Active_Window_XY(x, y);
 314   1          Active_Window_WH(X_W, Y_H);
 315   1          Goto_Text_XY(x, y);
 316   1      //    sprintf(tmp1, "%X", tmp2);
 317   1      //    Show_String(tmp1);
 318   1      }
*** WARNING C280 IN LINE 285 OF RA8889_01_Kernel\RA8889_API_51.c: 'tmp2': unreferenced local variable
 319          
 320          /*internal font
 321          x : Print font start coordinate of X
 322          y : Print font start coordinate of Y
 323          X_W : active window width
 324          Y_H : active window height
 325          FontColor : Set Font Color
 326          BackGroundColor : Set Font BackGround Color
 327          Font Color and BackGround Color dataformat :
 328          ColorDepth_8bpp : R3G3B2
 329          ColorDepth_16bpp : R5G6B5
 330          ColorDepth_24bpp : R8G8B8
 331          tmp2 : Decimalvariable you want print (range : 0 ~ 32bit)
 332          */
 333          void Print_Internal_Font_Decimalvariable(unsigned short x, unsigned short y, unsigned short X_W, unsigned 
             -short Y_H, unsigned long FontColor, unsigned long BackGroundColor, unsigned int tmp2)
 334          {
 335   1      
 336   1          Text_Mode();
 337   1          CGROM_Select_Internal_CGROM();
 338   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(FontColor);
                  Background_color_256(BackGroundColor);
              #endif
 342   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 346   1      #ifdef MCU_8bit_ColorDepth_24bpp
 347   1          Foreground_color_16M(FontColor);
 348   1          Background_color_16M(BackGroundColor);
 349   1      #endif
 350   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 354   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 358   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 7   

              #endif
 362   1          Active_Window_XY(x, y);
 363   1          Active_Window_WH(X_W, Y_H);
 364   1          Goto_Text_XY(x, y);
 365   1      //    sprintf(tmp1, "%d", tmp2);
 366   1      //    Show_String(tmp1);
 367   1      }
*** WARNING C280 IN LINE 333 OF RA8889_01_Kernel\RA8889_API_51.c: 'tmp2': unreferenced local variable
 368          
 369          void Print_Internal_Font_String(
 370              unsigned short x // coordinate x for print string
 371              ,
 372              unsigned short y // coordinate x for print string
 373              ,
 374              unsigned short X_W // active window width
 375              ,
 376              unsigned short Y_H // active window height
 377              ,
 378              unsigned long FontColor // FontColor : Set Font Color
 379              ,
 380              unsigned long BackGroundColor
 381              /*BackGroundColor : Set Font BackGround Color.Font Color and BackGround Color dataformat :
 382              ColorDepth_8bpp : R3G3B2
 383              ColorDepth_16bpp : R5G6B5
 384              ColorDepth_24bpp : R8G8B8*/
 385              ,
 386              char tmp2[] // tmp2 : Font String which you want print on LCD
 387          )
 388          {
 389   1      
 390   1          Text_Mode();
 391   1          CGROM_Select_Internal_CGROM();
 392   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(FontColor);
                  Background_color_256(BackGroundColor);
              #endif
 396   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 400   1      #ifdef MCU_8bit_ColorDepth_24bpp
 401   1          Foreground_color_16M(FontColor);
 402   1          Background_color_16M(BackGroundColor);
 403   1      #endif
 404   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 408   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 412   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 416   1          Active_Window_XY(x, y);
 417   1          Active_Window_WH(X_W, Y_H);
 418   1          Goto_Text_XY(x, y);
 419   1          //  sprintf(tmp1,"%s",tmp2);
 420   1          //  Show_String(tmp1);
 421   1      //    Show_String(tmp2);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 8   

 422   1      }
*** WARNING C280 IN LINE 386 OF RA8889_01_Kernel\RA8889_API_51.c: 'tmp2': unreferenced local variable
 423          
 424          void Print_BIG5String(
 425              unsigned char Clk // SPI CLK = System Clock / 2*(Clk+1)
 426              ,
 427              unsigned char BUS // 0 : Bus0, 1:Bus1
 428              ,
 429              unsigned char SCS // 0 : use CS0 , 1 : use CS1 , 2 : use CS2, 3 :use CS3
 430              ,
 431              unsigned short x // coordinate x for print string
 432              ,
 433              unsigned short y // coordinate y for print string
 434              ,
 435              unsigned short X_W // active window width
 436              ,
 437              unsigned short Y_H // active window height
 438              ,
 439              unsigned long FontColor // Set Font Color
 440              ,
 441              unsigned long BackGroundColor // Set Font BackGround Color
 442              /*Font Color and BackGround Color dataformat :
 443              ColorDepth_8bpp : R3G3B2
 444              ColorDepth_16bpp : R5G6B5
 445              ColorDepth_24bpp : R8G8B8*/
 446              ,
 447              char *tmp2 // tmp2 : BIG5 Font String which you want print on LCD
 448          )
 449          {
 450   1      
 451   1          Select_SFI_Font_Mode();
 452   1          CGROM_Select_Genitop_FontROM();
 453   1          SPI_Clock_Period(Clk);
 454   1          Set_GTFont_Decoder(0x11);
 455   1      
 456   1          Select_SFI_24bit_Address();
 457   1          Select_RA8875_SPI_Mode0_and_Mode3();
 458   1          Select_SFI_Single_Mode_Dummy_0T_03h();
 459   1      
 460   1          switch (SCS) {
 461   2              case 0:
 462   2                  Select_SFI_0();
 463   2                  break;
 464   2              case 1:
 465   2                  Select_SFI_1();
 466   2                  break;
 467   2              case 2:
 468   2                  Select_SFI_2();
 469   2                  break;
 470   2              case 3:
 471   2                  Select_SFI_3();
 472   2                  break;
 473   2          }
 474   1      
 475   1          switch (BUS) {
 476   2              case 0:
 477   2                  FONT_DMA_Select_Bus_0();
 478   2                  break;
 479   2              case 1:
 480   2                  FONT_DMA_Select_Bus_1();
 481   2                  break;
 482   2          }
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 9   

 483   1      
 484   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(FontColor);
                  Background_color_256(BackGroundColor);
              #endif
 488   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 492   1      #ifdef MCU_8bit_ColorDepth_24bpp
 493   1          Foreground_color_16M(FontColor);
 494   1          Background_color_16M(BackGroundColor);
 495   1      #endif
 496   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 500   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 504   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 508   1          Text_Mode();
 509   1          Active_Window_XY(x, y);
 510   1          Active_Window_WH(X_W, Y_H);
 511   1          Goto_Text_XY(x, y);
 512   1          //  sprintf(tmp1,"%s",tmp2);
 513   1          //  Show_String(tmp1);
 514   1      //    Show_String(tmp2);
 515   1      }
*** WARNING C280 IN LINE 447 OF RA8889_01_Kernel\RA8889_API_51.c: 'tmp2': unreferenced local variable
 516          
 517          void Print_GB2312String(
 518              unsigned char Clk // Clk : SPI CLK = System Clock / 2*(Clk+1)
 519              ,
 520              unsigned char BUS // 0 : Bus0, 1:Bus1
 521              ,
 522              unsigned char SCS // 0 : use CS0 , 1 : use CS1 , 2 : use CS2, 3 :use CS3
 523              ,
 524              unsigned short x // coordinate x for print string
 525              ,
 526              unsigned short y // coordinate y for print string
 527              ,
 528              unsigned short X_W // active window width
 529              ,
 530              unsigned short Y_H // active window height
 531              ,
 532              unsigned long FontColor // Set Font Color
 533              ,
 534              unsigned long BackGroundColor // Set Font BackGround Color
 535              /*Font Color and BackGround Color dataformat :
 536              ColorDepth_8bpp : R3G3B2
 537              ColorDepth_16bpp : R5G6B5
 538              ColorDepth_24bpp : R8G8B8*/
 539              ,
 540              char tmp2[] // tmp2 : GB2312 Font String which you want print on LCD
 541          )
 542          {
 543   1      
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 10  

 544   1          Select_SFI_Font_Mode();
 545   1          CGROM_Select_Genitop_FontROM();
 546   1          SPI_Clock_Period(Clk);
 547   1      
 548   1          Select_SFI_24bit_Address();
 549   1          Select_RA8875_SPI_Mode0_and_Mode3();
 550   1          Select_SFI_Single_Mode_Dummy_0T_03h();
 551   1      
 552   1          switch (SCS) {
 553   2              case 0:
 554   2                  Select_SFI_0();
 555   2                  break;
 556   2              case 1:
 557   2                  Select_SFI_1();
 558   2                  break;
 559   2              case 2:
 560   2                  Select_SFI_2();
 561   2                  break;
 562   2              case 3:
 563   2                  Select_SFI_3();
 564   2                  break;
 565   2          }
 566   1      
 567   1          switch (BUS) {
 568   2              case 0:
 569   2                  FONT_DMA_Select_Bus_0();
 570   2                  break;
 571   2              case 1:
 572   2                  FONT_DMA_Select_Bus_1();
 573   2                  break;
 574   2          }
 575   1      
 576   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(FontColor);
                  Background_color_256(BackGroundColor);
              #endif
 580   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 584   1      #ifdef MCU_8bit_ColorDepth_24bpp
 585   1          Foreground_color_16M(FontColor);
 586   1          Background_color_16M(BackGroundColor);
 587   1      #endif
 588   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 592   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 596   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 600   1          Text_Mode();
 601   1          Active_Window_XY(x, y);
 602   1          Active_Window_WH(X_W, Y_H);
 603   1          Goto_Text_XY(x, y);
 604   1          //  sprintf(tmp1,"%s",tmp2);
 605   1          //  Show_String(tmp1);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 11  

 606   1      //    Show_String(tmp2);
 607   1      }
*** WARNING C280 IN LINE 540 OF RA8889_01_Kernel\RA8889_API_51.c: 'tmp2': unreferenced local variable
 608          
 609          void Print_GB12345String(
 610              unsigned char Clk // Clk : SPI CLK = System Clock / 2*(Clk+1)
 611              ,
 612              unsigned char BUS // 0 : Bus0, 1:Bus1
 613              ,
 614              unsigned char SCS // 0 : use CS0 , 1 : use CS1 , 2 : use CS2, 3 :use CS3
 615              ,
 616              unsigned short x // coordinate x for print string
 617              ,
 618              unsigned short y ////coordinate y for print string
 619              ,
 620              unsigned short X_W // active window width
 621              ,
 622              unsigned short Y_H // active window height
 623              ,
 624              unsigned long FontColor // Set Font Color
 625              ,
 626              unsigned long BackGroundColor // Set Font BackGround Color
 627              /*Font Color and BackGround Color dataformat :
 628              ColorDepth_8bpp : R3G3B2
 629              ColorDepth_16bpp : R5G6B5
 630              ColorDepth_24bpp : R8G8B8*/
 631              ,
 632              char *tmp2 // tmp2 : GB12345 Font String which you want print on LCD
 633          )
 634          {
 635   1          Select_SFI_Font_Mode();
 636   1          CGROM_Select_Genitop_FontROM();
 637   1          SPI_Clock_Period(Clk);
 638   1          Set_GTFont_Decoder(0x05);
 639   1      
 640   1          Select_SFI_24bit_Address();
 641   1          Select_RA8875_SPI_Mode0_and_Mode3();
 642   1          Select_SFI_Single_Mode_Dummy_0T_03h();
 643   1      
 644   1          switch (SCS) {
 645   2              case 0:
 646   2                  Select_SFI_0();
 647   2                  break;
 648   2              case 1:
 649   2                  Select_SFI_1();
 650   2                  break;
 651   2              case 2:
 652   2                  Select_SFI_2();
 653   2                  break;
 654   2              case 3:
 655   2                  Select_SFI_3();
 656   2                  break;
 657   2          }
 658   1      
 659   1          switch (BUS) {
 660   2              case 0:
 661   2                  FONT_DMA_Select_Bus_0();
 662   2                  break;
 663   2              case 1:
 664   2                  FONT_DMA_Select_Bus_1();
 665   2                  break;
 666   2          }
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 12  

 667   1      
 668   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(FontColor);
                  Background_color_256(BackGroundColor);
              #endif
 672   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 676   1      #ifdef MCU_8bit_ColorDepth_24bpp
 677   1          Foreground_color_16M(FontColor);
 678   1          Background_color_16M(BackGroundColor);
 679   1      #endif
 680   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 684   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 688   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 692   1          Text_Mode();
 693   1          Active_Window_XY(x, y);
 694   1          Active_Window_WH(X_W, Y_H);
 695   1          Goto_Text_XY(x, y);
 696   1          //  sprintf(tmp1,"%s",tmp2);
 697   1          //  Show_String(tmp1);
 698   1      //    Show_String(tmp2);
 699   1      }
*** WARNING C280 IN LINE 632 OF RA8889_01_Kernel\RA8889_API_51.c: 'tmp2': unreferenced local variable
 700          
 701          void Print_UnicodeString(
 702              unsigned char Clk // SPI CLK = System Clock / 2*(Clk+1)
 703              ,
 704              unsigned char BUS // 0 : Bus0, 1:Bus1
 705              ,
 706              unsigned char SCS // 0 : use CS0 , 1 : use CS1 , 2 : use CS2, 3 :use CS3
 707              ,
 708              unsigned short x // Print font start coordinate of X
 709              ,
 710              unsigned short y // Print font start coordinate of Y
 711              ,
 712              unsigned short X_W // active window width
 713              ,
 714              unsigned short Y_H // active window height
 715              ,
 716              unsigned long FontColor // Set Font Color
 717              ,
 718              unsigned long BackGroundColor // Set Font BackGround Color
 719              /*Font Color and BackGround Color dataformat :
 720              ColorDepth_8bpp : R3G3B2
 721              ColorDepth_16bpp : R5G6B5
 722              ColorDepth_24bpp : R8G8B8*/
 723              ,
 724              unsigned short *tmp2 /*tmp2 : Unicode Font String which you want print on LCD (L"string" in keil c is 
             -Unicode string)*/
 725          )
 726          {
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 13  

 727   1          Select_SFI_Font_Mode();
 728   1          CGROM_Select_Genitop_FontROM();
 729   1          SPI_Clock_Period(Clk);
 730   1      
 731   1          Select_SFI_24bit_Address();
 732   1          Select_RA8875_SPI_Mode0_and_Mode3();
 733   1          Select_SFI_Single_Mode_Dummy_0T_03h();
 734   1      
 735   1          switch (SCS) {
 736   2              case 0:
 737   2                  Select_SFI_0();
 738   2                  break;
 739   2              case 1:
 740   2                  Select_SFI_1();
 741   2                  break;
 742   2              case 2:
 743   2                  Select_SFI_2();
 744   2                  break;
 745   2              case 3:
 746   2                  Select_SFI_3();
 747   2                  break;
 748   2          }
 749   1      
 750   1          switch (BUS) {
 751   2              case 0:
 752   2                  FONT_DMA_Select_Bus_0();
 753   2                  break;
 754   2              case 1:
 755   2                  FONT_DMA_Select_Bus_1();
 756   2                  break;
 757   2          }
 758   1      
 759   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(FontColor);
                  Background_color_256(BackGroundColor);
              #endif
 763   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 767   1      #ifdef MCU_8bit_ColorDepth_24bpp
 768   1          Foreground_color_16M(FontColor);
 769   1          Background_color_16M(BackGroundColor);
 770   1      #endif
 771   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(FontColor);
                  Background_color_65k(BackGroundColor);
              #endif
 775   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 779   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(FontColor);
                  Background_color_16M(BackGroundColor);
              #endif
 783   1          Text_Mode();
 784   1          Active_Window_XY(x, y);
 785   1          Active_Window_WH(X_W, Y_H);
 786   1          Goto_Text_XY(x, y);
 787   1          while (*tmp2 != '\0') {
 788   2              if ((*tmp2) > 0x0020 && (*tmp2) < 0x0080) {
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 14  

 789   3                  /* ASCII Code*/
 790   3                  Set_GTFont_Decoder(0x21);
 791   3                  LCD_CmdWrite(0x04);
 792   3                  LCD_DataWrite(*tmp2);
 793   3                  Check_2D_Busy();
 794   3              } else {
 795   3                  /* Unicode */
 796   3                  Set_GTFont_Decoder(0x18);
 797   3                  LCD_CmdWrite(0x04);
 798   3                  LCD_DataWrite((*tmp2) >> 8);
 799   3                  LCD_DataWrite(*tmp2);
 800   3                  Check_2D_Busy();
 801   3              }
 802   2              ++tmp2;
 803   2          }
 804   1      
 805   1          /* Aribrial */
 806   1          Set_GTFont_Decoder(0x3a);
 807   1          LCD_CmdWrite(0x04);
 808   1          LCD_DataWrite(0x060C);
 809   1          Check_2D_Busy();
 810   1      
 811   1          Graphic_Mode(); // back to graphic mode
 812   1      }
 813          
 814          void Select_Font_Height_WxN_HxN_ChromaKey_Alignment(
 815              unsigned char Font_Height
 816              /*Font_Height:
 817              16 : Font = 8x16 B16x16
 818              24 : Font = 12x24B24x24
 819              32 : Font = 16x32B32x32 */
 820              ,
 821              unsigned char XxN // XxN :Font Width x 1~4
 822              ,
 823              unsigned char YxN // YxN :Font Height x 1~4
 824              ,
 825              unsigned char ChromaKey
 826              /*ChromaKey :
 827              0 : Font Background color not transparency
 828              1 : Set Font Background color transparency*/
 829              ,
 830              unsigned char Alignment // 0 : no alignment, 1 : Set font alignment
 831          )
 832          {
 833   1          if (Font_Height == 16) Font_Select_8x16_16x16();
 834   1          if (Font_Height == 24) Font_Select_12x24_24x24();
 835   1          if (Font_Height == 32) Font_Select_16x32_32x32();
 836   1      
 837   1          //(*)
 838   1          if (XxN == 1) Font_Width_X1();
 839   1          if (XxN == 2) Font_Width_X2();
 840   1          if (XxN == 3) Font_Width_X3();
 841   1          if (XxN == 4) Font_Width_X4();
 842   1      
 843   1          //(*)
 844   1          if (YxN == 1) Font_Height_X1();
 845   1          if (YxN == 2) Font_Height_X2();
 846   1          if (YxN == 3) Font_Height_X3();
 847   1          if (YxN == 4) Font_Height_X4();
 848   1      
 849   1          //(*)
 850   1          if (ChromaKey == 0) { Font_Background_select_Color(); }
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 15  

 851   1      
 852   1          if (ChromaKey == 1) { Font_Background_select_Original_Canvas(); }
 853   1      
 854   1          //(*)
 855   1          if (Alignment == 0) { Disable_Font_Alignment(); }
 856   1      
 857   1          if (Alignment == 1) { Enable_Font_Alignment(); }
 858   1      }
 859          
 860          void Show_String(char *str)
 861          {
 862   1          Check_Mem_WR_FIFO_Empty();
 863   1      
 864   1          Text_Mode();
 865   1      
 866   1          LCD_CmdWrite(0x04);
 867   1          while (*str != '\0') {
 868   2              Check_Mem_WR_FIFO_not_Full();
 869   2              LCD_DataWrite(*str);
 870   2              ++str;
 871   2          }
 872   1          Check_2D_Busy();
 873   1          Graphic_Mode(); // back to graphic mode
 874   1      }
 875          
 876          void Draw_Line(
 877              unsigned long LineColor
 878              /*LineColor : Set Draw Line color. Line Color dataformat :
 879              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
 880              ,
 881              unsigned short X1 // X of point1 coordinate
 882              ,
 883              unsigned short Y1 // Y of point1 coordinate
 884              ,
 885              unsigned short X2 // X of point2 coordinate
 886              ,
 887              unsigned short Y2 // Y of point2 coordinate
 888          )
 889          {
 890   1      
 891   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(LineColor);
              #endif
 894   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(LineColor);
              #endif
 897   1      #ifdef MCU_8bit_ColorDepth_24bpp
 898   1          Foreground_color_16M(LineColor);
 899   1      #endif
 900   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(LineColor);
              #endif
 903   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(LineColor);
              #endif
 906   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(LineColor);
              #endif
 909   1          Line_Start_XY(X1, Y1);
 910   1          Line_End_XY(X2, Y2);
 911   1          Start_Line();
 912   1          Check_2D_Busy();
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 16  

 913   1      }
 914          
 915          void Draw_Triangle(
 916              unsigned long ForegroundColor
 917              /*ForegroundColor: Set Draw Triangle color. ForegroundColor Color dataformat :
 918              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
 919              ,
 920              unsigned short X1 // X of point1 coordinate
 921              ,
 922              unsigned short Y1 // Y of point1 coordinate
 923              ,
 924              unsigned short X2 // X of point2 coordinate
 925              ,
 926              unsigned short Y2 // Y of point2 coordinate
 927              ,
 928              unsigned short X3 // X of point3 coordinate
 929              ,
 930              unsigned short Y3 // Y of point3 coordinate
 931          )
 932          {
 933   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
 936   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
 939   1      #ifdef MCU_8bit_ColorDepth_24bpp
 940   1          Foreground_color_16M(ForegroundColor);
 941   1      #endif
 942   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
 945   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
 948   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
 951   1          Triangle_Point1_XY(X1, Y1);
 952   1          Triangle_Point2_XY(X2, Y2);
 953   1          Triangle_Point3_XY(X3, Y3);
 954   1          Start_Triangle();
 955   1          Check_2D_Busy();
 956   1      }
 957          
 958          void Draw_Triangle_Fill(
 959              unsigned long ForegroundColor
 960              /*ForegroundColor: Set Draw Triangle color. ForegroundColor Color dataformat :
 961              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
 962              ,
 963              unsigned short X1 // X of point1 coordinate
 964              ,
 965              unsigned short Y1 // Y of point1 coordinate
 966              ,
 967              unsigned short X2 // X of point2 coordinate
 968              ,
 969              unsigned short Y2 // Y of point2 coordinate
 970              ,
 971              unsigned short X3 // X of point3 coordinate
 972              ,
 973              unsigned short Y3 // Y of point3 coordinate
 974          )
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 17  

 975          {
 976   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
 979   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
 982   1      #ifdef MCU_8bit_ColorDepth_24bpp
 983   1          Foreground_color_16M(ForegroundColor);
 984   1      #endif
 985   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
 988   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
 991   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
 994   1          Triangle_Point1_XY(X1, Y1);
 995   1          Triangle_Point2_XY(X2, Y2);
 996   1          Triangle_Point3_XY(X3, Y3);
 997   1          Start_Triangle_Fill();
 998   1          Check_2D_Busy();
 999   1      }
1000          
1001          void Draw_Circle(
1002              unsigned long ForegroundColor // ForegroundColor: Set Draw Circle or Circle Fill color
1003              /*ForegroundColor Color dataformat :
1004              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1005              ,
1006              unsigned short XCenter // coordinate X of Center
1007              ,
1008              unsigned short YCenter // coordinate Y of Center
1009              ,
1010              unsigned short R // Circle Radius
1011          )
1012          {
1013   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1016   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1019   1      #ifdef MCU_8bit_ColorDepth_24bpp
1020   1          Foreground_color_16M(ForegroundColor);
1021   1      #endif
1022   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1025   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1028   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1031   1          Circle_Center_XY(XCenter, YCenter);
1032   1          Circle_Radius_R(R);
1033   1          Start_Circle_or_Ellipse();
1034   1          Check_2D_Busy();
1035   1      }
1036          
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 18  

1037          void Draw_Circle_Fill(
1038              unsigned long ForegroundColor
1039              /*ForegroundColor: Set Draw Circle or Circle Fill color
1040              ForegroundColor Color dataformat :
1041              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1042              ,
1043              unsigned short XCenter // coordinate X of Center
1044              ,
1045              unsigned short YCenter // coordinate Y of Center
1046              ,
1047              unsigned short R // Circle Radius
1048          )
1049          {
1050   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1053   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1056   1      #ifdef MCU_8bit_ColorDepth_24bpp
1057   1          Foreground_color_16M(ForegroundColor);
1058   1      #endif
1059   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1062   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1065   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1068   1          Circle_Center_XY(XCenter, YCenter);
1069   1          Circle_Radius_R(R);
1070   1          Start_Circle_or_Ellipse_Fill();
1071   1          Check_2D_Busy();
1072   1      }
1073          
1074          void Draw_Ellipse(
1075              unsigned long ForegroundColor // ForegroundColor : Set Draw Ellipse or Ellipse Fill color
1076              /*ForegroundColor Color dataformat :
1077              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1078              ,
1079              unsigned short XCenter // coordinate X of Center
1080              ,
1081              unsigned short YCenter // coordinate Y of Center
1082              ,
1083              unsigned short X_R // Radius Width of Ellipse
1084              ,
1085              unsigned short Y_R // Radius Length of Ellipse
1086          )
1087          {
1088   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1091   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1094   1      #ifdef MCU_8bit_ColorDepth_24bpp
1095   1          Foreground_color_16M(ForegroundColor);
1096   1      #endif
1097   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 19  

              #endif
1100   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1103   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1106   1          Ellipse_Center_XY(XCenter, YCenter);
1107   1          Ellipse_Radius_RxRy(X_R, Y_R);
1108   1          Start_Circle_or_Ellipse();
1109   1          Check_2D_Busy();
1110   1      }
1111          
1112          void Draw_Ellipse_Fill(
1113              unsigned long ForegroundColor // ForegroundColor : Set Draw Ellipse or Ellipse Fill color
1114              /*ForegroundColor Color dataformat :
1115              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1116              ,
1117              unsigned short XCenter // coordinate X of Center
1118              ,
1119              unsigned short YCenter // coordinate Y of Center
1120              ,
1121              unsigned short X_R // Radius Width of Ellipse
1122              ,
1123              unsigned short Y_R // Radius Length of Ellipse
1124          )
1125          {
1126   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1129   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1132   1      #ifdef MCU_8bit_ColorDepth_24bpp
1133   1          Foreground_color_16M(ForegroundColor);
1134   1      #endif
1135   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1138   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1141   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1144   1          Ellipse_Center_XY(XCenter, YCenter);
1145   1          Ellipse_Radius_RxRy(X_R, Y_R);
1146   1          Start_Circle_or_Ellipse_Fill();
1147   1          Check_2D_Busy();
1148   1      }
1149          
1150          void Draw_Left_Up_Curve(
1151              unsigned long ForegroundColor // ForegroundColor: Set Curve or Curve Fill color
1152              /*ForegroundColor Color dataformat :
1153              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1154              ,
1155              unsigned short XCenter // coordinate X of Center
1156              ,
1157              unsigned short YCenter // coordinate Y of Center
1158              ,
1159              unsigned short X_R // Radius Width of Curve
1160              ,
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 20  

1161              unsigned short Y_R // Radius Length of Curve
1162          )
1163          {
1164   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1167   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1170   1      #ifdef MCU_8bit_ColorDepth_24bpp
1171   1          Foreground_color_16M(ForegroundColor);
1172   1      #endif
1173   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1176   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1179   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1182   1          Ellipse_Center_XY(XCenter, YCenter);
1183   1          Ellipse_Radius_RxRy(X_R, Y_R);
1184   1          Start_Left_Up_Curve();
1185   1          Check_2D_Busy();
1186   1      }
1187          
1188          void Draw_Left_Up_Curve_Fill(
1189              unsigned long ForegroundColor // ForegroundColor: Set Curve or Curve Fill color
1190              /*ForegroundColor Color dataformat :
1191              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1192              ,
1193              unsigned short XCenter // coordinate X of Center
1194              ,
1195              unsigned short YCenter // coordinate Y of Center
1196              ,
1197              unsigned short X_R // Radius Width of Curve
1198              ,
1199              unsigned short Y_R // Radius Length of Curve
1200          )
1201          {
1202   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1205   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1208   1      #ifdef MCU_8bit_ColorDepth_24bpp
1209   1          Foreground_color_16M(ForegroundColor);
1210   1      #endif
1211   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1214   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1217   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1220   1          Ellipse_Center_XY(XCenter, YCenter);
1221   1          Ellipse_Radius_RxRy(X_R, Y_R);
1222   1          Start_Left_Up_Curve_Fill();
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 21  

1223   1          Check_2D_Busy();
1224   1      }
1225          
1226          void Draw_Right_Down_Curve(
1227              unsigned long ForegroundColor // ForegroundColor: Set Curve or Curve Fill color
1228              /*ForegroundColor Color dataformat :
1229              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1230              ,
1231              unsigned short XCenter // coordinate X of Center
1232              ,
1233              unsigned short YCenter // coordinate Y of Center
1234              ,
1235              unsigned short X_R // Radius Width of Curve
1236              ,
1237              unsigned short Y_R // Radius Length of Curve
1238          )
1239          {
1240   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1243   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1246   1      #ifdef MCU_8bit_ColorDepth_24bpp
1247   1          Foreground_color_16M(ForegroundColor);
1248   1      #endif
1249   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1252   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1255   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1258   1          Ellipse_Center_XY(XCenter, YCenter);
1259   1          Ellipse_Radius_RxRy(X_R, Y_R);
1260   1          Start_Right_Down_Curve();
1261   1          Check_2D_Busy();
1262   1      }
1263          
1264          void Draw_Right_Down_Curve_Fill(
1265              unsigned long ForegroundColor // ForegroundColor: Set Curve or Curve Fill color
1266              /*ForegroundColor Color dataformat :
1267              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1268              ,
1269              unsigned short XCenter // coordinate X of Center
1270              ,
1271              unsigned short YCenter // coordinate Y of Center
1272              ,
1273              unsigned short X_R // Radius Width of Curve
1274              ,
1275              unsigned short Y_R // Radius Length of Curve
1276          )
1277          {
1278   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1281   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1284   1      #ifdef MCU_8bit_ColorDepth_24bpp
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 22  

1285   1          Foreground_color_16M(ForegroundColor);
1286   1      #endif
1287   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1290   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1293   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1296   1          Ellipse_Center_XY(XCenter, YCenter);
1297   1          Ellipse_Radius_RxRy(X_R, Y_R);
1298   1          Start_Right_Down_Curve_Fill();
1299   1          Check_2D_Busy();
1300   1      }
1301          
1302          void Draw_Right_Up_Curve(
1303              unsigned long ForegroundColor // ForegroundColor: Set Curve or Curve Fill color
1304              /*ForegroundColor Color dataformat :
1305              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1306              ,
1307              unsigned short XCenter // coordinate X of Center
1308              ,
1309              unsigned short YCenter // coordinate Y of Center
1310              ,
1311              unsigned short X_R // Radius Width of Curve
1312              ,
1313              unsigned short Y_R // Radius Length of Curve
1314          )
1315          {
1316   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1319   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1322   1      #ifdef MCU_8bit_ColorDepth_24bpp
1323   1          Foreground_color_16M(ForegroundColor);
1324   1      #endif
1325   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1328   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1331   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1334   1          Ellipse_Center_XY(XCenter, YCenter);
1335   1          Ellipse_Radius_RxRy(X_R, Y_R);
1336   1          Start_Right_Up_Curve();
1337   1          Check_2D_Busy();
1338   1      }
1339          
1340          void Draw_Right_Up_Curve_Fill(
1341              unsigned long ForegroundColor // ForegroundColor: Set Curve or Curve Fill color
1342              /*ForegroundColor Color dataformat :
1343              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1344              ,
1345              unsigned short XCenter // coordinate X of Center
1346              ,
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 23  

1347              unsigned short YCenter // coordinate Y of Center
1348              ,
1349              unsigned short X_R // Radius Width of Curve
1350              ,
1351              unsigned short Y_R // Radius Length of Curve
1352          )
1353          {
1354   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1357   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1360   1      #ifdef MCU_8bit_ColorDepth_24bpp
1361   1          Foreground_color_16M(ForegroundColor);
1362   1      #endif
1363   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1366   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1369   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1372   1          Ellipse_Center_XY(XCenter, YCenter);
1373   1          Ellipse_Radius_RxRy(X_R, Y_R);
1374   1          Start_Right_Up_Curve_Fill();
1375   1          Check_2D_Busy();
1376   1      }
1377          
1378          void Draw_Left_Down_Curve(
1379              unsigned long ForegroundColor // ForegroundColor: Set Curve or Curve Fill color
1380              /*ForegroundColor Color dataformat :
1381              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1382              ,
1383              unsigned short XCenter // coordinate X of Center
1384              ,
1385              unsigned short YCenter // coordinate Y of Center
1386              ,
1387              unsigned short X_R // Radius Width of Curve
1388              ,
1389              unsigned short Y_R // Radius Length of Curve
1390          )
1391          {
1392   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1395   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1398   1      #ifdef MCU_8bit_ColorDepth_24bpp
1399   1          Foreground_color_16M(ForegroundColor);
1400   1      #endif
1401   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1404   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1407   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 24  

              #endif
1410   1          Ellipse_Center_XY(XCenter, YCenter);
1411   1          Ellipse_Radius_RxRy(X_R, Y_R);
1412   1          Start_Left_Down_Curve();
1413   1          Check_2D_Busy();
1414   1      }
1415          
1416          void Draw_Left_Down_Curve_Fill(
1417              unsigned long ForegroundColor // ForegroundColor: Set Curve or Curve Fill color
1418              /*ForegroundColor Color dataformat :
1419              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1420              ,
1421              unsigned short XCenter // coordinate X of Center
1422              ,
1423              unsigned short YCenter // coordinate Y of Center
1424              ,
1425              unsigned short X_R // Radius Width of Curve
1426              ,
1427              unsigned short Y_R // Radius Length of Curve
1428          )
1429          {
1430   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1433   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1436   1      #ifdef MCU_8bit_ColorDepth_24bpp
1437   1          Foreground_color_16M(ForegroundColor);
1438   1      #endif
1439   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1442   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1445   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1448   1          Ellipse_Center_XY(XCenter, YCenter);
1449   1          Ellipse_Radius_RxRy(X_R, Y_R);
1450   1          Start_Left_Down_Curve_Fill();
1451   1          Check_2D_Busy();
1452   1      }
1453          
1454          void Draw_Square(
1455              unsigned long ForegroundColor
1456              /*ForegroundColor: Set Curve or Curve Fill color. ForegroundColor Color dataformat :
1457              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1458              ,
1459              unsigned short X1 // X of point1 coordinate
1460              ,
1461              unsigned short Y1 // Y of point1 coordinate
1462              ,
1463              unsigned short X2 // X of point2 coordinate
1464              ,
1465              unsigned short Y2 // Y of point2 coordinate
1466          )
1467          {
1468   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 25  

1471   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1474   1      #ifdef MCU_8bit_ColorDepth_24bpp
1475   1          Foreground_color_16M(ForegroundColor);
1476   1      #endif
1477   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1480   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1483   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1486   1          Square_Start_XY(X1, Y1);
1487   1          Square_End_XY(X2, Y2);
1488   1          Start_Square();
1489   1          Check_2D_Busy();
1490   1      }
1491          
1492          void Draw_Square_Fill(
1493              unsigned long ForegroundColor
1494              /*ForegroundColor: Set Curve or Curve Fill color. ForegroundColor Color dataformat :
1495              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1496              ,
1497              unsigned short X1 // X of point1 coordinate
1498              ,
1499              unsigned short Y1 // Y of point1 coordinate
1500              ,
1501              unsigned short X2 // X of point2 coordinate
1502              ,
1503              unsigned short Y2 // Y of point2 coordinate
1504          )
1505          {
1506   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1509   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1512   1      #ifdef MCU_8bit_ColorDepth_24bpp
1513   1          Foreground_color_16M(ForegroundColor);
1514   1      #endif
1515   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1518   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1521   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1524   1          Square_Start_XY(X1, Y1);
1525   1          Square_End_XY(X2, Y2);
1526   1          Start_Square_Fill();
1527   1          Check_2D_Busy();
1528   1      }
1529          
1530          void Draw_Circle_Square(
1531              unsigned long ForegroundColor
1532              /*ForegroundColor : Set Circle Square color. ForegroundColor Color dataformat :
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 26  

1533              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1534              ,
1535              unsigned short X1 // X of point1 coordinate
1536              ,
1537              unsigned short Y1 // Y of point1 coordinate
1538              ,
1539              unsigned short X2 // X of point2 coordinate
1540              ,
1541              unsigned short Y2 // Y of point2 coordinate
1542              ,
1543              unsigned short X_R // Radius Width of Circle Square
1544              ,
1545              unsigned short Y_R // Radius Length of Circle Square
1546          )
1547          {
1548   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
1551   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1554   1      #ifdef MCU_8bit_ColorDepth_24bpp
1555   1          Foreground_color_16M(ForegroundColor);
1556   1      #endif
1557   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1560   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1563   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1566   1          Square_Start_XY(X1, Y1);
1567   1          Square_End_XY(X2, Y2);
1568   1          Circle_Square_Radius_RxRy(X_R, Y_R);
1569   1          Start_Circle_Square();
1570   1          Check_2D_Busy();
1571   1      }
1572          
1573          void Draw_Circle_Square_Fill(
1574              unsigned long ForegroundColor
1575              /*ForegroundColor : Set Circle Square color. ForegroundColor Color dataformat :
1576              ColorDepth_8bpp : R3G3B2BColorDepth_16bpp : R5G6B5BColorDepth_24bpp : R8G8B8*/
1577              ,
1578              unsigned short X1 // X of point1 coordinate
1579              ,
1580              unsigned short Y1 // Y of point1 coordinate
1581              ,
1582              unsigned short X2 // X of point2 coordinate
1583              ,
1584              unsigned short Y2 // Y of point2 coordinate
1585              ,
1586              unsigned short X_R // Radius Width of Circle Square
1587              ,
1588              unsigned short Y_R // Radius Length of Circle Square
1589          )
1590          {
1591   1      
1592   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(ForegroundColor);
              #endif
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 27  

1595   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1598   1      #ifdef MCU_8bit_ColorDepth_24bpp
1599   1          Foreground_color_16M(ForegroundColor);
1600   1      #endif
1601   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(ForegroundColor);
              #endif
1604   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(ForegroundColor);
              #endif
1607   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(ForegroundColor);
              #endif
1610   1          Square_Start_XY(X1, Y1);
1611   1          Square_End_XY(X2, Y2);
1612   1          Circle_Square_Radius_RxRy(X_R, Y_R);
1613   1          Start_Circle_Square_Fill();
1614   1          Check_2D_Busy();
1615   1      }
1616          
1617          void BTE_Pattern_Fill(
1618              unsigned char P_8x8_or_16x16 // 0 : use 8x8 Icon , 1 : use 16x16 Icon.
1619              ,
1620              unsigned long S0_Addr // Start address of Source 0
1621              ,
1622              unsigned short S0_W // image width of Source 0 (recommend = canvas image width)
1623              ,
1624              unsigned short XS0 // coordinate X of Source 0
1625              ,
1626              unsigned short YS0 // coordinate Y of Source 0
1627              ,
1628              unsigned long S1_Addr // Start address of Source 1
1629              ,
1630              unsigned short S1_W // image width of Source 1 (recommend = canvas image width)
1631              ,
1632              unsigned short XS1 // coordinate X of Source 1
1633              ,
1634              unsigned short YS1 // coordinate Y of Source 1
1635              ,
1636              unsigned long Des_Addr // start address of Destination
1637              ,
1638              unsigned short Des_W // image width of Destination (recommend = canvas image width)
1639              ,
1640              unsigned short XDes // coordinate X of Destination
1641              ,
1642              unsigned short YDes // coordinate Y of Destination
1643              ,
1644              unsigned int ROP_Code
1645              /*ROP_Code :
1646                 0000b    0(Blackness)
1647                 0001b    ~S0!E~S1 or ~(S0+S1)
1648                 0010b    ~S0!ES1
1649                 0011b    ~S0
1650                 0100b    S0!E~S1
1651                 0101b    ~S1
1652                 0110b    S0^S1
1653                 0111b    ~S0 + ~S1 or ~(S0 + S1)
1654                 1000b    S0!ES1
1655                 1001b    ~(S0^S1)
1656                 1010b    S1
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 28  

1657                 1011b    ~S0+S1
1658                 1100b    S0
1659                 1101b    S0+~S1
1660                 1110b    S0+S1
1661                 1111b    1(whiteness)*/
1662              ,
1663              unsigned short X_W // Width of BTE Winodw
1664              ,
1665              unsigned short Y_H // Length of BTE Winodw
1666          )
1667          {
1668   1          if (P_8x8_or_16x16 == 0) {
1669   2              Pattern_Format_8X8();
1670   2          }
1671   1          if (P_8x8_or_16x16 == 1) {
1672   2              Pattern_Format_16X16();
1673   2          }
1674   1          BTE_S0_Memory_Start_Address(S0_Addr);
1675   1          BTE_S0_Image_Width(S0_W);
1676   1          BTE_S0_Window_Start_XY(XS0, YS0);
1677   1      
1678   1          BTE_S1_Memory_Start_Address(S1_Addr);
1679   1          BTE_S1_Image_Width(S1_W);
1680   1          BTE_S1_Window_Start_XY(XS1, YS1);
1681   1      
1682   1          BTE_Destination_Memory_Start_Address(Des_Addr);
1683   1          BTE_Destination_Image_Width(Des_W);
1684   1          BTE_Destination_Window_Start_XY(XDes, YDes);
1685   1      
1686   1          BTE_ROP_Code(ROP_Code);
1687   1          BTE_Operation_Code(0x06); // BTE Operation: Pattern Fill with ROP.
1688   1          BTE_Window_Size(X_W, Y_H);
1689   1          BTE_Enable();
1690   1          Check_BTE_Busy();
1691   1      }
1692          
1693          void BTE_Pattern_Fill_With_Chroma_key(
1694              unsigned char P_8x8_or_16x16 // 0 : use 8x8 Icon , 1 : use 16x16 Icon.
1695              ,
1696              unsigned long S0_Addr // Start address of Source 0
1697              ,
1698              unsigned short S0_W // image width of Source 0 (recommend = canvas image width)
1699              ,
1700              unsigned short XS0 // coordinate X of Source 0
1701              ,
1702              unsigned short YS0 // coordinate Y of Source 0
1703              ,
1704              unsigned long S1_Addr // Start address of Source 1
1705              ,
1706              unsigned short S1_W // image width of Source 1 (recommend = canvas image width)
1707              ,
1708              unsigned short XS1 // coordinate X of Source 1
1709              ,
1710              unsigned short YS1 // coordinate Y of Source 1
1711              ,
1712              unsigned long Des_Addr // Des_Addr : start address of Destination
1713              ,
1714              unsigned short Des_W // Des_W : image width of Destination (recommend = canvas image width)
1715              ,
1716              unsigned short XDes // coordinate X of Destination
1717              ,
1718              unsigned short YDes // coordinate Y of Destination
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 29  

1719              ,
1720              unsigned int ROP_Code
1721              /*ROP_Code :
1722                 0000b    0(Blackness)
1723                 0001b    ~S0!E~S1 or ~(S0+S1)
1724                 0010b    ~S0!ES1
1725                 0011b    ~S0
1726                 0100b    S0!E~S1
1727                 0101b    ~S1
1728                 0110b    S0^S1
1729                 0111b    ~S0 + ~S1 or ~(S0 + S1)
1730                 1000b    S0!ES1
1731                 1001b    ~(S0^S1)
1732                 1010b    S1
1733                 1011b    ~S0+S1
1734                 1100b    S0
1735                 1101b    S0+~S1
1736                 1110b    S0+S1
1737                 1111b    1(whiteness)*/
1738              ,
1739              unsigned long Background_color // Transparent color
1740              ,
1741              unsigned short X_W // Width of BTE Window
1742              ,
1743              unsigned short Y_H // Length of BTE Window
1744          )
1745          {
1746   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Background_color_256(Background_color);
              #endif
1749   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Background_color_65k(Background_color);
              #endif
1752   1      #ifdef MCU_8bit_ColorDepth_24bpp
1753   1          Background_color_16M(Background_color);
1754   1      #endif
1755   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Background_color_65k(Background_color);
              #endif
1758   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Background_color_16M(Background_color);
              #endif
1761   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Background_color_16M(Background_color);
              #endif
1764   1          if (P_8x8_or_16x16 == 0) {
1765   2              Pattern_Format_8X8();
1766   2          }
1767   1          if (P_8x8_or_16x16 == 1) {
1768   2              Pattern_Format_16X16();
1769   2          }
1770   1          BTE_S0_Memory_Start_Address(S0_Addr);
1771   1          BTE_S0_Image_Width(S0_W);
1772   1          BTE_S0_Window_Start_XY(XS0, YS0);
1773   1      
1774   1          BTE_S1_Memory_Start_Address(S1_Addr);
1775   1          BTE_S1_Image_Width(S1_W);
1776   1          BTE_S1_Window_Start_XY(XS1, YS1);
1777   1      
1778   1          BTE_Destination_Memory_Start_Address(Des_Addr);
1779   1          BTE_Destination_Image_Width(Des_W);
1780   1          BTE_Destination_Window_Start_XY(XDes, YDes);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 30  

1781   1      
1782   1          BTE_ROP_Code(ROP_Code);
1783   1          BTE_Operation_Code(0x07); // BTE Operation: Pattern Fill with Chroma key.
1784   1          BTE_Window_Size(X_W, Y_H);
1785   1          BTE_Enable();
1786   1          Check_BTE_Busy();
1787   1      }
1788          
1789          void BTE_Memory_Copy(
1790              unsigned long S0_Addr // Start address of Source 0
1791              ,
1792              unsigned short S0_W // image width of Source 0 (recommend = canvas image width)
1793              ,
1794              unsigned short XS0 // coordinate X of Source 0
1795              ,
1796              unsigned short YS0 // coordinate Y of Source 0
1797              ,
1798              unsigned long S1_Addr // Start address of Source 1
1799              ,
1800              unsigned short S1_W // image width of Source 1 (recommend = canvas image width)
1801              ,
1802              unsigned short XS1 // coordinate X of Source 1
1803              ,
1804              unsigned short YS1 // coordinate Y of Source 1
1805              ,
1806              unsigned long Des_Addr // start address of Destination
1807              ,
1808              unsigned short Des_W // image width of Destination (recommend = canvas image width)
1809              ,
1810              unsigned short XDes // coordinate X of Destination
1811              ,
1812              unsigned short YDes // coordinate Y of Destination
1813              ,
1814              unsigned int ROP_Code
1815              /*ROP_Code :
1816                 0000b    0(Blackness)
1817                 0001b    ~S0!E~S1 or ~(S0+S1)
1818                 0010b    ~S0!ES1
1819                 0011b    ~S0
1820                 0100b    S0!E~S1
1821                 0101b    ~S1
1822                 0110b    S0^S1
1823                 0111b    ~S0 + ~S1 or ~(S0 + S1)
1824                 1000b    S0!ES1
1825                 1001b    ~(S0^S1)
1826                 1010b    S1
1827                 1011b    ~S0+S1
1828                 1100b    S0
1829                 1101b    S0+~S1
1830                 1110b    S0+S1
1831                 1111b    1(whiteness)*/
1832              ,
1833              unsigned short X_W // X_W : Width of BTE Window
1834              ,
1835              unsigned short Y_H // Y_H : Length of BTE Window
1836          )
1837          {
1838   1          BTE_S0_Memory_Start_Address(S0_Addr);
1839   1          BTE_S0_Image_Width(S0_W);
1840   1          BTE_S0_Window_Start_XY(XS0, YS0);
1841   1      
1842   1          BTE_S1_Memory_Start_Address(S1_Addr);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 31  

1843   1          BTE_S1_Image_Width(S1_W);
1844   1          BTE_S1_Window_Start_XY(XS1, YS1);
1845   1      
1846   1          BTE_Destination_Memory_Start_Address(Des_Addr);
1847   1          BTE_Destination_Image_Width(Des_W);
1848   1          BTE_Destination_Window_Start_XY(XDes, YDes);
1849   1      
1850   1          BTE_ROP_Code(ROP_Code);
1851   1          BTE_Operation_Code(0x02); // BTE Operation: Memory copy (move) with ROP.
1852   1          BTE_Window_Size(X_W, Y_H);
1853   1          BTE_Enable();
1854   1          Check_BTE_Busy();
1855   1      }
1856          
1857          void BTE_Memory_Copy_Chroma_key(
1858              unsigned long S0_Addr // Start address of Source 0
1859              ,
1860              unsigned short S0_W // image width of Source 0 (recommend = canvas image width)
1861              ,
1862              unsigned short XS0 // coordinate X of Source 0
1863              ,
1864              unsigned short YS0 // coordinate Y of Source 0
1865              ,
1866              unsigned long Des_Addr // start address of Destination
1867              ,
1868              unsigned short Des_W // image width of Destination (recommend = canvas image width)
1869              ,
1870              unsigned short XDes // coordinate X of Destination
1871              ,
1872              unsigned short YDes // coordinate Y of Destination
1873              ,
1874              unsigned long Background_color // transparent color
1875              ,
1876              unsigned short X_W // Width of BTE Window
1877              ,
1878              unsigned short Y_H // Length of BTE Window
1879          )
1880          {
1881   1      
1882   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Background_color_256(Background_color);
              #endif
1885   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Background_color_65k(Background_color);
              #endif
1888   1      #ifdef MCU_8bit_ColorDepth_24bpp
1889   1          Background_color_16M(Background_color);
1890   1      #endif
1891   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Background_color_65k(Background_color);
              #endif
1894   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Background_color_16M(Background_color);
              #endif
1897   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Background_color_16M(Background_color);
              #endif
1900   1          BTE_S0_Memory_Start_Address(S0_Addr);
1901   1          BTE_S0_Image_Width(S0_W);
1902   1          BTE_S0_Window_Start_XY(XS0, YS0);
1903   1      
1904   1          BTE_Destination_Memory_Start_Address(Des_Addr);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 32  

1905   1          BTE_Destination_Image_Width(Des_W);
1906   1          BTE_Destination_Window_Start_XY(XDes, YDes);
1907   1      
1908   1          BTE_Operation_Code(0x05); // BTE Operation: Memory copy (move) with chroma keying (w/o ROP)
1909   1          BTE_Window_Size(X_W, Y_H);
1910   1          BTE_Enable();
1911   1          Check_BTE_Busy();
1912   1      }
1913          
1914          void BTE_MCU_Write_MCU_8bit(
1915              unsigned long S1_Addr // Start address of Source 1
1916              ,
1917              unsigned short S1_W // image width of Source 1 (recommend = canvas image width)
1918              ,
1919              unsigned short XS1 // coordinate X of Source 1
1920              ,
1921              unsigned short YS1 // coordinate Y of Source 1
1922              ,
1923              unsigned long Des_Addr // start address of Destination
1924              ,
1925              unsigned short Des_W // image width of Destination (recommend = canvas image width)
1926              ,
1927              unsigned short XDes // coordinate X of Destination
1928              ,
1929              unsigned short YDes // coordinate Y of Destination
1930              ,
1931              unsigned int ROP_Code
1932              /*ROP_Code :
1933                 0000b    0(Blackness)
1934                 0001b    ~S0!E~S1 or ~(S0+S1)
1935                 0010b    ~S0!ES1
1936                 0011b    ~S0
1937                 0100b    S0!E~S1
1938                 0101b    ~S1
1939                 0110b    S0^S1
1940                 0111b    ~S0 + ~S1 or ~(S0 + S1)
1941                 1000b    S0!ES1
1942                 1001b    ~(S0^S1)
1943                 1010b    S1
1944                 1011b    ~S0+S1
1945                 1100b    S0
1946                 1101b    S0+~S1
1947                 1110b    S0+S1
1948                 1111b    1(whiteness)*/
1949              ,
1950              unsigned short X_W // Width of BTE Window
1951              ,
1952              unsigned short Y_H // Length of BTE Window
1953              ,
1954              const unsigned char *data_array // 8-bit data
1955          )
1956          {
1957   1          unsigned short i, j;
1958   1      
1959   1          BTE_S1_Memory_Start_Address(S1_Addr);
1960   1          BTE_S1_Image_Width(S1_W);
1961   1          BTE_S1_Window_Start_XY(XS1, YS1);
1962   1      
1963   1          BTE_Destination_Memory_Start_Address(Des_Addr);
1964   1          BTE_Destination_Image_Width(Des_W);
1965   1          BTE_Destination_Window_Start_XY(XDes, YDes);
1966   1      
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 33  

1967   1          BTE_Window_Size(X_W, Y_H);
1968   1          BTE_ROP_Code(ROP_Code);
1969   1          BTE_Operation_Code(0x00); // BTE Operation: MPU Write with ROP.
1970   1          BTE_Enable();
1971   1          LCD_CmdWrite(0x04); // Memory Data Read/Write Port
1972   1      #ifdef MCU_8bit_ColorDepth_8bpp
              
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < (X_W); j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
1983   1      
1984   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < (X_W * 2); j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
1994   1      
1995   1      #ifdef MCU_8bit_ColorDepth_24bpp
1996   1          for (i = 0; i < Y_H; i++) {
1997   2              for (j = 0; j < (X_W * 3); j++) {
1998   3                  Check_Mem_WR_FIFO_not_Full();
1999   3                  LCD_DataWrite(*data_array);
2000   3                  data_array++;
2001   3              }
2002   2          }
2003   1          Check_Mem_WR_FIFO_Empty();
2004   1      #endif
2005   1      }
2006          
2007          void BTE_MCU_Write_MCU_16bit(
2008              unsigned long S1_Addr // Start address of Source 1
2009              ,
2010              unsigned short S1_W // image width of Source 1 (recommend = canvas image width)
2011              ,
2012              unsigned short XS1 // coordinate X of Source 1
2013              ,
2014              unsigned short YS1 // coordinate Y of Source 1
2015              ,
2016              unsigned long Des_Addr // start address of Destination
2017              ,
2018              unsigned short Des_W // image width of Destination (recommend = canvas image width)
2019              ,
2020              unsigned short XDes // coordinate X of Destination
2021              ,
2022              unsigned short YDes // coordinate Y of Destination
2023              ,
2024              unsigned int ROP_Code
2025              /*ROP_Code :
2026                 0000b    0(Blackness)
2027                 0001b    ~S0!E~S1 or ~(S0+S1)
2028                 0010b    ~S0!ES1
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 34  

2029                 0011b    ~S0
2030                 0100b    S0!E~S1
2031                 0101b    ~S1
2032                 0110b    S0^S1
2033                 0111b    ~S0 + ~S1 or ~(S0 + S1)
2034                 1000b    S0!ES1
2035                 1001b    ~(S0^S1)
2036                 1010b    S1
2037                 1011b    ~S0+S1
2038                 1100b    S0
2039                 1101b    S0+~S1
2040                 1110b    S0+S1
2041                 1111b    1(whiteness)*/
2042              ,
2043              unsigned short X_W // Width of BTE Window
2044              ,
2045              unsigned short Y_H // Length of BTE Window
2046              ,
2047              const unsigned short *data_array // 16-bit data
2048          )
2049          {
2050   1          unsigned short i, j;
2051   1      
2052   1          BTE_S1_Memory_Start_Address(S1_Addr);
2053   1          BTE_S1_Image_Width(S1_W);
2054   1          BTE_S1_Window_Start_XY(XS1, YS1);
2055   1      
2056   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2057   1          BTE_Destination_Image_Width(Des_W);
2058   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2059   1      
2060   1          BTE_Window_Size(X_W, Y_H);
2061   1          BTE_ROP_Code(ROP_Code);
2062   1          BTE_Operation_Code(0x00); // BTE Operation: MPU Write with ROP.
2063   1          BTE_Enable();
2064   1          LCD_CmdWrite(0x04); // Memory Data Read/Write Port
2065   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < (X_W); j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite((*data_array));
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2075   1      
2076   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < (X_W / 2); j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 35  

              #endif
2092   1      
2093   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < (X_W); j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2106   1      
2107   1          Check_BTE_Busy();
2108   1      }
*** WARNING C280 IN LINE 2047 OF RA8889_01_Kernel\RA8889_API_51.c: 'data_array': unreferenced local variable
*** WARNING C280 IN LINE 2050 OF RA8889_01_Kernel\RA8889_API_51.c: 'i': unreferenced local variable
*** WARNING C280 IN LINE 2050 OF RA8889_01_Kernel\RA8889_API_51.c: 'j': unreferenced local variable
2109          
2110          void BTE_MCU_Write_Chroma_key_MCU_8bit(
2111              unsigned long Des_Addr // start address of Destination
2112              ,
2113              unsigned short Des_W // image width of Destination (recommend = canvas image width)
2114              ,
2115              unsigned short XDes // coordinate X of Destination
2116              ,
2117              unsigned short YDes // coordinate Y of Destination
2118              ,
2119              unsigned long Background_color // transparency color
2120              ,
2121              unsigned short X_W // Width of BTE Window
2122              ,
2123              unsigned short Y_H // Length of BTE Window
2124              ,
2125              const unsigned char *data_array // 8-bit data
2126          )
2127          {
2128   1          unsigned short i, j;
2129   1      
2130   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Background_color_256(Background_color);
              #endif
2133   1      
2134   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Background_color_65k(Background_color);
              #endif
2137   1      
2138   1      #ifdef MCU_8bit_ColorDepth_24bpp
2139   1          Background_color_16M(Background_color);
2140   1      #endif
2141   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2142   1          BTE_Destination_Image_Width(Des_W);
2143   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2144   1      
2145   1          BTE_Window_Size(X_W, Y_H);
2146   1          BTE_Operation_Code(0x04); // BTE Operation: MPU Write w/ chroma keying (w/o ROP)
2147   1          BTE_Enable();
2148   1      
2149   1          LCD_CmdWrite(0x04); // Memory Data Read/Write Port
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 36  

2150   1      
2151   1      #ifdef MCU_8bit_ColorDepth_8bpp
              
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < (X_W); j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2162   1      
2163   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < (X_W * 2); j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2173   1      
2174   1      #ifdef MCU_8bit_ColorDepth_24bpp
2175   1          for (i = 0; i < Y_H; i++) {
2176   2              for (j = 0; j < (X_W * 3); j++) {
2177   3                  Check_Mem_WR_FIFO_not_Full();
2178   3                  LCD_DataWrite(*data_array);
2179   3                  data_array++;
2180   3              }
2181   2          }
2182   1          Check_Mem_WR_FIFO_Empty();
2183   1      #endif
2184   1          Check_BTE_Busy();
2185   1      }
2186          
2187          void BTE_MCU_Write_Chroma_key_MCU_16bit(
2188              unsigned long Des_Addr // start address of Destination
2189              ,
2190              unsigned short Des_W // image width of Destination (recommend = canvas image width)
2191              ,
2192              unsigned short XDes // coordinate X of Destination
2193              ,
2194              unsigned short YDes // coordinate Y of Destination
2195              ,
2196              unsigned long Background_color // transparency color
2197              ,
2198              unsigned short X_W // Width of BTE Window
2199              ,
2200              unsigned short Y_H // Length of BTE Window
2201              ,
2202              const unsigned short *data_array // 16-bit data
2203          )
2204          {
2205   1          unsigned int i, j;
2206   1      
2207   1      #ifdef MCU_16bit_ColorDepth_16bpp // setting in UserDef.h
                  Background_color_65k(Background_color);
              #endif
2210   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1 // setting in UserDef.h
                  Background_color_16M(Background_color);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 37  

              #endif
2213   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2 // setting in UserDef.h
                  Background_color_16M(Background_color);
              #endif
2216   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2217   1          BTE_Destination_Image_Width(Des_W);
2218   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2219   1      
2220   1          BTE_Window_Size(X_W, Y_H);
2221   1          BTE_Operation_Code(0x04); // BTE Operation: MPU Write with chroma keying (w/o ROP)
2222   1          BTE_Enable();
2223   1          LCD_CmdWrite(0x04);           // Memory Data Read/Write Port
2224   1      #ifdef MCU_16bit_ColorDepth_16bpp // setting in UserDef.h
              
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < X_W; j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2235   1      
2236   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1 // setting in UserDef.h
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < (X_W / 2); j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2252   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2 // setting in UserDef.h
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < (X_W); j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2265   1      
2266   1          Check_BTE_Busy();
2267   1      }
*** WARNING C280 IN LINE 2196 OF RA8889_01_Kernel\RA8889_API_51.c: 'Background_color': unreferenced local variable
*** WARNING C280 IN LINE 2202 OF RA8889_01_Kernel\RA8889_API_51.c: 'data_array': unreferenced local variable
*** WARNING C280 IN LINE 2205 OF RA8889_01_Kernel\RA8889_API_51.c: 'i': unreferenced local variable
*** WARNING C280 IN LINE 2205 OF RA8889_01_Kernel\RA8889_API_51.c: 'j': unreferenced local variable
2268          
2269          /*
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 38  

2270          No support 24bpp color depth
2271          S0_Addr : Source 0 Start address
2272          S0_W : Source 0 image width(recommend = canvas image width)
2273          XS0 : Source 0 coordinate of X
2274          YS0 : Source 0 coordinate of Y
2275          Des_Addr : Destination start address
2276          Des_W :  Destination image width(recommend = canvas image width)
2277          XDes : Destination coordinate of X
2278          YDes : Destination coordinate of Y
2279          X_W : BTE Window Size of X
2280          Y_H : BTE Window Size of Y
2281          Foreground_color : The source (1bit map picture) map data 1 translate to Foreground color by color expansi
             -on
2282          Background_color : The source (1bit map picture) map data 0 translate to background color by color expansi
             -on
2283          */
2284          void BTE_Memory_Copy_ColorExpansion(unsigned long S0_Addr, unsigned short S0_W, unsigned short XS0, unsign
             -ed short YS0, unsigned long Des_Addr, unsigned short Des_W, unsigned short XDes, unsigned short YDes, unsigned short X_W
             -, unsigned short Y_H, unsigned long Foreground_color, unsigned long Background_color)
2285          {
2286   1      
2287   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(Foreground_color);
                  Background_color_256(Background_color);
                  BTE_ROP_Code(7); // MCU data bus width: 8bit, ROP Code=7
              #endif
2292   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(Foreground_color);
                  Background_color_65k(Background_color);
                  BTE_ROP_Code(15); // MCU data bus width: 8bit, ROP Code=7
              #endif
2297   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(Foreground_color);
                  Background_color_65k(Background_color);
                  BTE_ROP_Code(15); // MCU data bus width: 16bit, ROP Code=7
              #endif
2302   1      
2303   1          BTE_S0_Memory_Start_Address(S0_Addr);
2304   1          BTE_S0_Image_Width(S0_W);
2305   1          BTE_S0_Window_Start_XY(XS0, YS0);
2306   1      
2307   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2308   1          BTE_Destination_Image_Width(Des_W);
2309   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2310   1      
2311   1          BTE_Window_Size(X_W, Y_H);
2312   1          BTE_Operation_Code(0xE); // BTE Operation: Memory write with Color Expansion (w/o ROP)
2313   1      
2314   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  BTE_Enable();
                  Check_BTE_Busy();
              #endif
2318   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  BTE_Enable();
                  Check_BTE_Busy();
              #endif
2322   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  BTE_Enable();
                  Check_BTE_Busy();
              #endif
2326   1      }
*** WARNING C280 IN LINE 2284 OF RA8889_01_Kernel\RA8889_API_51.c: 'Foreground_color': unreferenced local variable
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 39  

*** WARNING C280 IN LINE 2284 OF RA8889_01_Kernel\RA8889_API_51.c: 'Background_color': unreferenced local variable
2327          
2328          /*
2329          No support 24bpp color depth
2330          S0_Addr : Source 0 Start address
2331          S0_W : Source 0 image width(recommend = canvas image width)
2332          XS0 : Source 0 coordinate of X
2333          YS0 : Source 0 coordinate of Y
2334          Des_Addr : Destination start address
2335          Des_W :  Destination image width(recommend = canvas image width)
2336          XDes : Destination coordinate of X
2337          YDes : Destination coordinate of Y
2338          X_W : BTE Window Size of X
2339          Y_H : BTE Window Size of Y
2340          Foreground_color : The source (1bit map picture) map data 1 translate to Foreground color by color expansi
             -on
2341          */
2342          void BTE_Memory_Copy_ColorExpansion_Chroma_key(unsigned long S0_Addr, unsigned short S0_W, unsigned short 
             -XS0, unsigned short YS0, unsigned long Des_Addr, unsigned short Des_W, unsigned short XDes, unsigned short YDes, unsigne
             -d short X_W, unsigned short Y_H, unsigned long Foreground_color)
2343          {
2344   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(Foreground_color);
                  BTE_ROP_Code(7); // MCU data bus width: 8bit, ROP Code=7
              #endif
2348   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(Foreground_color);
                  BTE_ROP_Code(15); // MCU data bus width: 8bit, ROP Code=7
              #endif
2352   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(Foreground_color);
                  BTE_ROP_Code(15); // MCU data bus width: 16bit, ROP Code=7
              #endif
2356   1      
2357   1          BTE_S0_Memory_Start_Address(S0_Addr);
2358   1          BTE_S0_Image_Width(S0_W);
2359   1          BTE_S0_Window_Start_XY(XS0, YS0);
2360   1      
2361   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2362   1          BTE_Destination_Image_Width(Des_W);
2363   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2364   1      
2365   1          BTE_Window_Size(X_W, Y_H);
2366   1          BTE_Operation_Code(0xF); // BTE Operation: Memory write with Color Expansion and chroma keying (w/o RO
             -P)
2367   1      
2368   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  BTE_Enable();
                  Check_BTE_Busy();
              #endif
2372   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  BTE_Enable();
                  Check_BTE_Busy();
              #endif
2376   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  BTE_Enable();
                  Check_BTE_Busy();
              #endif
2380   1      }
*** WARNING C280 IN LINE 2342 OF RA8889_01_Kernel\RA8889_API_51.c: 'Foreground_color': unreferenced local variable
2381          
2382          void BTE_MCU_Write_ColorExpansion_MCU_8bit(
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 40  

2383              unsigned long Des_Addr // start address of Destination
2384              ,
2385              unsigned short Des_W // image width of Destination (recommend = canvas image width)
2386              ,
2387              unsigned short XDes // coordinate X of Destination
2388              ,
2389              unsigned short YDes // coordinate Y of Destination
2390              ,
2391              unsigned short X_W // Width of BTE Window
2392              ,
2393              unsigned short Y_H // Length of BTE Window
2394              ,
2395              unsigned long Foreground_color
2396              /*Foreground_color : The source (1bit map picture) map data 1 translate to Foreground color by color e
             -xpansion*/
2397              ,
2398              unsigned long Background_color
2399              /*Background_color : The source (1bit map picture) map data 0 translate to Foreground color by color e
             -xpansion*/
2400              ,
2401              const unsigned char *data_array // 8-bit data
2402          )
2403          {
2404   1          unsigned short i, j;
2405   1      
2406   1          /* set BTE Parameters and Run */
2407   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(Foreground_color);
                  Background_color_256(Background_color);
              #endif
2411   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(Foreground_color);
                  Background_color_65k(Background_color);
              #endif
2415   1      #ifdef MCU_8bit_ColorDepth_24bpp
2416   1          Foreground_color_16M(Foreground_color);
2417   1          Background_color_16M(Background_color);
2418   1      #endif
2419   1      
2420   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2421   1          BTE_Destination_Image_Width(Des_W);
2422   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2423   1      
2424   1          BTE_ROP_Code(7); // MCU data bus width: 8bit, ROP Code=7
2425   1          BTE_Window_Size(X_W, Y_H);
2426   1          BTE_Operation_Code(0x8); // BTE Operation: MPU Write with Color Expansion (w/o ROP)
2427   1      
2428   1          BTE_Enable();
2429   1      
2430   1          LCD_CmdWrite(0x04); // Memory Data Read/Write Port
2431   1      
2432   1          for (i = 0; i < Y_H; i++) {
2433   2              for (j = 0; j < X_W / 8; j++) {
2434   3                  Check_Mem_WR_FIFO_not_Full();
2435   3                  LCD_DataWrite(*data_array);
2436   3                  data_array++;
2437   3              }
2438   2          }
2439   1          Check_Mem_WR_FIFO_Empty();
2440   1      
2441   1          Check_BTE_Busy();
2442   1      }
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 41  

2443          
2444          void BTE_MCU_Write_ColorExpansion_MCU_16bit(
2445              unsigned long Des_Addr // start address of Destination
2446              ,
2447              unsigned short Des_W // image width of Destination (recommend = canvas image width)
2448              ,
2449              unsigned short XDes // coordinate X of Destination
2450              ,
2451              unsigned short YDes // coordinate Y of Destination
2452              ,
2453              unsigned short X_W // Width of BTE Window
2454              ,
2455              unsigned short Y_H // Length of BTE Window
2456              ,
2457              unsigned long Foreground_color
2458              /*Foreground_color : The source (1bit map picture) map data 1 translate to Foreground color by color e
             -xpansion*/
2459              ,
2460              unsigned long Background_color
2461              /*Background_color : The source (1bit map picture) map data 0 translate to Background color by color e
             -xpansion*/
2462              ,
2463              const unsigned short *data_array // 16-bit data@
2464          )
2465          {
2466   1          unsigned short i, j;
2467   1      
2468   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Data_Format_16b_16bpp();
                  Foreground_color_65k(Foreground_color);
                  Background_color_65k(Background_color);
                  BTE_ROP_Code(15);
              #endif
2474   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Data_Format_16b_8bpp();
                  Foreground_color_16M(Foreground_color);
                  Background_color_16M(Background_color);
                  BTE_ROP_Code(7);
              #endif
2480   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Data_Format_16b_8bpp();
                  Foreground_color_16M(Foreground_color);
                  Background_color_16M(Background_color);
                  BTE_ROP_Code(7);
              #endif
2486   1      
2487   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2488   1          BTE_Destination_Image_Width(Des_W);
2489   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2490   1      
2491   1          BTE_Window_Size(X_W, Y_H);
2492   1          BTE_Operation_Code(0x8); // BTE Operation: MPU Write with Color Expansion (w/o ROP)
2493   1          BTE_Enable();
2494   1      
2495   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  LCD_CmdWrite(0x04); // Memory Data Read/Write Port
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < X_W / 16; j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 42  

                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2506   1      
2507   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  LCD_CmdWrite(0x04); // Memory Data Read/Write Port
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < X_W / 16; j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array >> 8);
              
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2521   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  LCD_CmdWrite(0x04); // Memory Data Read/Write Port
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < X_W / 16; j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array >> 8);
              
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2535   1      
2536   1          Check_BTE_Busy();
2537   1      
2538   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Data_Format_16b_16bpp();
              #endif
2541   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Data_Format_16b_24bpp_mode1();
              #endif
2544   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Data_Format_16b_24bpp_mode2();
              #endif
2547   1      }
*** WARNING C280 IN LINE 2457 OF RA8889_01_Kernel\RA8889_API_51.c: 'Foreground_color': unreferenced local variable
*** WARNING C280 IN LINE 2460 OF RA8889_01_Kernel\RA8889_API_51.c: 'Background_color': unreferenced local variable
*** WARNING C280 IN LINE 2463 OF RA8889_01_Kernel\RA8889_API_51.c: 'data_array': unreferenced local variable
*** WARNING C280 IN LINE 2466 OF RA8889_01_Kernel\RA8889_API_51.c: 'i': unreferenced local variable
*** WARNING C280 IN LINE 2466 OF RA8889_01_Kernel\RA8889_API_51.c: 'j': unreferenced local variable
2548          
2549          void BTE_MCU_Write_ColorExpansion_Chroma_key_MCU_8bit(
2550              unsigned long Des_Addr // start address of Destination
2551              ,
2552              unsigned short Des_W // image width of Destination (recommend = canvas image width)
2553              ,
2554              unsigned short XDes // coordinate X of Destination
2555              ,
2556              unsigned short YDes // coordinate Y of Destination
2557              ,
2558              unsigned short X_W // Width of BTE Window
2559              ,
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 43  

2560              unsigned short Y_H // Length of BTE Window
2561              ,
2562              unsigned long Foreground_color
2563              /*Foreground_color : The source (1bit map picture) map data 1 translate to Foreground color by color e
             -xpansion*/
2564              ,
2565              const unsigned char *data_array // 8-bit data
2566          )
2567          {
2568   1          unsigned short i, j;
2569   1      
2570   1          //  Data_Format_8b_8bpp();
2571   1      
2572   1          /* set BTE Parameters and Run */
2573   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(Foreground_color);
              #endif
2576   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(Foreground_color);
              #endif
2579   1      #ifdef MCU_8bit_ColorDepth_24bpp
2580   1          Foreground_color_16M(Foreground_color);
2581   1      #endif
2582   1      
2583   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2584   1          BTE_Destination_Image_Width(Des_W);
2585   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2586   1      
2587   1          BTE_ROP_Code(7); // MCU data bus width: 8bit, ROP Code=7
2588   1          BTE_Window_Size(X_W, Y_H);
2589   1          BTE_Operation_Code(0x9); // BTE Operation: MPU Write with Color Expansion and chroma keying (w/o ROP)
2590   1      
2591   1          BTE_Enable();
2592   1      
2593   1          LCD_CmdWrite(0x04); // Memory Data Read/Write Port
2594   1      
2595   1          for (i = 0; i < Y_H; i++) {
2596   2              for (j = 0; j < X_W / 8; j++) {
2597   3                  Check_Mem_WR_FIFO_not_Full();
2598   3                  LCD_DataWrite(*data_array);
2599   3                  data_array++;
2600   3              }
2601   2          }
2602   1          Check_Mem_WR_FIFO_Empty();
2603   1      
2604   1          Check_BTE_Busy();
2605   1      }
2606          
2607          void BTE_MCU_Write_ColorExpansion_Chroma_key_MCU_16bit(
2608              unsigned long Des_Addr // start address of Destination
2609              ,
2610              unsigned short Des_W // image width of Destination (recommend = canvas image width)
2611              ,
2612              unsigned short XDes // coordinate X of Destination
2613              ,
2614              unsigned short YDes // coordinate Y of Destination
2615              ,
2616              unsigned short X_W // Width of BTE Window
2617              ,
2618              unsigned short Y_H // Length of BTE Window
2619              ,
2620              unsigned long Foreground_color
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 44  

2621              /*Foreground_color : The source (1bit map picture) map data 1 translate to Foreground color by color e
             -xpansion*/
2622              ,
2623              const unsigned short *data_array // 16-bit data
2624          )
2625          {
2626   1          unsigned short i, j;
2627   1      
2628   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Data_Format_16b_16bpp();
                  Foreground_color_65k(Foreground_color);
                  BTE_ROP_Code(15);
              #endif
2633   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Data_Format_16b_8bpp();
                  Foreground_color_16M(Foreground_color);
                  BTE_ROP_Code(7);
              #endif
2638   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Data_Format_16b_8bpp();
                  Foreground_color_16M(Foreground_color);
                  BTE_ROP_Code(7);
              #endif
2643   1      
2644   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2645   1          BTE_Destination_Image_Width(Des_W);
2646   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2647   1      
2648   1          BTE_Window_Size(X_W, Y_H);
2649   1          BTE_Operation_Code(0x9); // BTE Operation: MPU Write with Color Expansion and chroma keying (w/o ROP)
2650   1          BTE_Enable();
2651   1          LCD_CmdWrite(0x04); // Memory Data Read/Write Port
2652   1      
2653   1      #ifdef MCU_16bit_ColorDepth_16bpp // setting in UserDef.h
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < X_W / 16; j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2663   1      
2664   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1 // setting in UserDef.h
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < X_W / 16; j++) {
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array >> 8);
              
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2677   1      
2678   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2 // setting in UserDef.h
                  for (i = 0; i < Y_H; i++) {
                      for (j = 0; j < X_W / 16; j++) {
                          Check_Mem_WR_FIFO_not_Full();
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 45  

                          LCD_DataWrite(*data_array >> 8);
              
                          Check_Mem_WR_FIFO_not_Full();
                          LCD_DataWrite(*data_array);
                          data_array++;
                      }
                  }
                  Check_Mem_WR_FIFO_Empty();
              #endif
2691   1          Check_BTE_Busy();
2692   1      }
*** WARNING C280 IN LINE 2620 OF RA8889_01_Kernel\RA8889_API_51.c: 'Foreground_color': unreferenced local variable
*** WARNING C280 IN LINE 2623 OF RA8889_01_Kernel\RA8889_API_51.c: 'data_array': unreferenced local variable
*** WARNING C280 IN LINE 2626 OF RA8889_01_Kernel\RA8889_API_51.c: 'i': unreferenced local variable
*** WARNING C280 IN LINE 2626 OF RA8889_01_Kernel\RA8889_API_51.c: 'j': unreferenced local variable
2693          
2694          void BTE_Solid_Fill(
2695              unsigned long Des_Addr // start address of destination
2696              ,
2697              unsigned short Des_W // image width of destination (recommend = canvas image width)
2698              ,
2699              unsigned short XDes // coordinate X of destination
2700              ,
2701              unsigned short YDes // coordinate Y of destination
2702              ,
2703              unsigned long Foreground_color // Solid Fill color
2704              ,
2705              unsigned short X_W // Width of BTE Window
2706              ,
2707              unsigned short Y_H // Length of BTE Window
2708          )
2709          {
2710   1      
2711   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  Foreground_color_256(Foreground_color);
              #endif
2714   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  Foreground_color_65k(Foreground_color);
              #endif
2717   1      #ifdef MCU_8bit_ColorDepth_24bpp
2718   1          Foreground_color_16M(Foreground_color);
2719   1      #endif
2720   1      
2721   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  Foreground_color_65k(Foreground_color);
              #endif
2724   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
                  Foreground_color_16M(Foreground_color);
              #endif
2727   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  Foreground_color_16M(Foreground_color);
              #endif
2730   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2731   1          BTE_Destination_Image_Width(Des_W);
2732   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2733   1          BTE_Window_Size(X_W, Y_H);
2734   1          BTE_Operation_Code(0x0c); // BTE Operation: Solid Fill (w/o ROP)
2735   1          BTE_Enable();
2736   1          Check_BTE_Busy();
2737   1      }
2738          
2739          /*
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 46  

2740          S0_Addr : Source 0 Start address
2741          S0_W : Source 0 image width(recommend = canvas image width)
2742          XS0 : Source 0 coordinate of X
2743          YS0 : Source 0 coordinate of Y
2744          S1_Addr : Source 1 Start address
2745          S1_W : Source 1 image width(recommend = canvas image width)
2746          XS1 : Source 1 coordinate of X
2747          YS1 : Source 1 coordinate of Y
2748          Des_Addr : Destination start address
2749          Des_W :  Destination image width(recommend = canvas image width)
2750          XDes : Destination coordinate of X
2751          YDes : Destination coordinate of Y
2752          X_W : BTE Window Size of X
2753          Y_H : BTE Window Size of Y
2754          alpha : Alpha Blending effect 0 ~ 32, Destination data = (Source 0 * (1- alpha)) + (Source 1 * alpha)
2755          */
2756          void BTE_Alpha_Blending_Picture_Mode(unsigned long S0_Addr, unsigned short S0_W, unsigned short XS0, unsig
             -ned short YS0, unsigned long S1_Addr, unsigned short S1_W, unsigned short XS1, unsigned short YS1, unsigned long Des_Add
             -r, unsigned short Des_W, unsigned short XDes, unsigned short YDes, unsigned short X_W, unsigned short Y_H, unsigned char
             - alpha)
2757          {
2758   1          BTE_S0_Memory_Start_Address(S0_Addr);
2759   1          BTE_S0_Image_Width(S0_W);
2760   1          BTE_S0_Window_Start_XY(XS0, YS0);
2761   1      
2762   1          BTE_S1_Memory_Start_Address(S1_Addr);
2763   1          BTE_S1_Image_Width(S1_W);
2764   1          BTE_S1_Window_Start_XY(XS1, YS1);
2765   1      
2766   1          BTE_Destination_Memory_Start_Address(Des_Addr);
2767   1          BTE_Destination_Image_Width(Des_W);
2768   1          BTE_Destination_Window_Start_XY(XDes, YDes);
2769   1      
2770   1          BTE_Window_Size(X_W, Y_H);
2771   1          BTE_Operation_Code(0x0A); // BTE Operation: Memory write with opacity (w/o ROP)
2772   1          BTE_Alpha_Blending_Effect(alpha);
2773   1          BTE_Enable();
2774   1          Check_BTE_Busy();
2775   1      }
2776          
2777          void DMA_24bit(
2778              unsigned char Clk // Clk : SPI Clock = System Clock /{(Clk)*2} , SPI CLK recommend <=90MHz
2779              ,
2780              unsigned short X1 // X of DMA Coordinate
2781              ,
2782              unsigned short Y1 // Y of DMA Coordinate
2783              ,
2784              unsigned short X_W // DMA Block width
2785              ,
2786              unsigned short Y_H // DMA Block height
2787              ,
2788              unsigned short P_W // DMA Picture width
2789              ,
2790              unsigned long Addr // DMA Source Start address
2791          )
2792          {
2793   1          SPIM_Clock_Divided_1();                // SPI Clock = System Clock /{(Clk)*2}
2794   1          SPI_Master_LatchEdge_Select_Falling(); // SPIM latch
2795   1      
2796   1          Select_SFI_DMA_Mode(); // Set Serial Flash DMA Mode
2797   1          SPI_Clock_Period(Clk);
2798   1          /////////////////////////////////////////****************DMA
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 47  

2799   1          Goto_Pixel_XY(X1, Y1);                         // set Memory coordinate in Graphic Mode
2800   1          SFI_DMA_Destination_Upper_Left_Corner(X1, Y1); // DMA Destination position(x,y)
2801   1          SFI_DMA_Transfer_Width_Height(X_W, Y_H);       // Set DMA Block (Height , Width)
2802   1          SFI_DMA_Source_Width(P_W);                     // Set DMA Source Picture Width
2803   1          SFI_DMA_Source_Start_Address(Addr);            // Set Serial Flash DMA Source Starting Address
2804   1      
2805   1          Start_SFI_DMA();      // Start DMA
2806   1          Check_Busy_SFI_DMA(); // DMA Busy Check
2807   1      }
2808          
2809          void DMA_32bit(
2810              unsigned char Clk // Clk : SPI Clock = System Clock /{(Clk+1)*2}
2811              ,
2812              unsigned short X1 // X of DMA Coordinate
2813              ,
2814              unsigned short Y1 // Y of DMA Coordinate
2815              ,
2816              unsigned short X_W // DMA Block width
2817              ,
2818              unsigned short Y_H // DMA Block height
2819              ,
2820              unsigned short P_W // DMA Picture width
2821              ,
2822              unsigned long Addr // DMA Source Start address
2823          )
2824          {
2825   1      
2826   1          //  Enable_SFlash_SPI();                     //Enable Serial Flash
2827   1          Select_SFI_DMA_Mode(); // Set Serial Flash DMA Mode
2828   1          SPI_Clock_Period(Clk);
2829   1      
2830   1          Select_SFI_32bit_Address(); // Set Serial Flash/ROM 32bits Address
2831   1          /////////////////////////////////////////****************DMA
2832   1          Goto_Pixel_XY(X1, Y1);                         // set Memory coordinate in Graphic Mode
2833   1          SFI_DMA_Destination_Upper_Left_Corner(X1, Y1); // DMA Destination position(x,y)
2834   1          SFI_DMA_Transfer_Width_Height(X_W, Y_H);       // Set DMA Block (Height , Width)
2835   1          SFI_DMA_Source_Width(P_W);                     // Set DMA Source Picture Width
2836   1          SFI_DMA_Source_Start_Address(Addr);            // Set Serial Flash DMA Source Starting Address
2837   1      
2838   1          Start_SFI_DMA();      // Start DMA
2839   1          Check_Busy_SFI_DMA(); // DMA Busy Check
2840   1          Select_SFI_24bit_Address();
2841   1      }
2842          
2843          void switch_24bits_to_32bits(unsigned char BUS, unsigned char SCS)
2844          {
2845   1          Enable_SFlash_SPI();
2846   1          SPI_Master_LatchEdge_Select_Falling();
2847   1          SPIM_Clock_Divided_1();
2848   1          SPI_Clock_Period(2);
2849   1      
2850   1          switch (BUS) {
2851   2              case 0:
2852   2                  SPIM_Select_Bus_0();
2853   2                  break;
2854   2      
2855   2              case 1:
2856   2                  SPIM_Select_Bus_1();
2857   2                  break;
2858   2          }
2859   1      
2860   1          if (SCS == 0) {
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 48  

2861   2              Select_nSS_drive_on_xnsfcs0();
2862   2          }
2863   1          if (SCS == 1) {
2864   2              Select_nSS_drive_on_xnsfcs1();
2865   2          }
2866   1          if (SCS == 2) {
2867   2              Select_nSS_drive_on_xnsfcs2();
2868   2          }
2869   1          if (SCS == 3) {
2870   2              Select_nSS_drive_on_xnsfcs3();
2871   2          }
2872   1          //**************************//data are read on the clock's rising edge(low!high transition)
2873   1          //**************************//and data are changed on a falling edge (high!low clock transition)
2874   1          Reset_CPOL();
2875   1          // Set_CPOL();
2876   1          Reset_CPHA();
2877   1          // Set_CPHA();
2878   1          //**************************
2879   1          // Enter 4-byte mode
2880   1      
2881   1          nSS_Active(); // nSS port will goes low
2882   1          SPI_Master_FIFO_Data_Put(0xB7);
2883   1      
2884   1          delay_ms(1);
2885   1          nSS_Inactive(); // nSS port will goes high
2886   1      }
2887          
2888          void PWM0(
2889              unsigned char on_off // on_off = 1 ,enable PWM, on_off = 0 , disable PWM.
2890              ,
2891              unsigned char Clock_Divided // divided PWM clock, only 0~3(1,1/2,1/4,1/8)
2892              ,
2893              unsigned char Prescalar // Prescaler : only 1~256
2894              ,
2895              unsigned short Count_Buffer // Count_Buffer : set PWM output period time
2896              ,
2897              unsigned short Compare_Buffer // Compare_Buffer : set PWM output high level time(Duty cycle)
2898              /*Such as the following formula :
2899              PWM CLK = (Core CLK / Prescalar ) /2^ divided clock
2900              PWM output period = (Count Buffer + 1) x PWM CLK time
2901              PWM output high level time = (Compare Buffer + 1) x PWM CLK time */
2902          )
2903          {
2904   1          Select_PWM0();
2905   1          Set_PWM_Prescaler_1_to_256(Prescalar);
2906   1      
2907   1          if (Clock_Divided == 0) {
2908   2              Select_PWM0_Clock_Divided_By_1();
2909   2          }
2910   1          if (Clock_Divided == 1) {
2911   2              Select_PWM0_Clock_Divided_By_2();
2912   2          }
2913   1          if (Clock_Divided == 2) {
2914   2              Select_PWM0_Clock_Divided_By_4();
2915   2          }
2916   1          if (Clock_Divided == 3) {
2917   2              Select_PWM0_Clock_Divided_By_8();
2918   2          }
2919   1      
2920   1          Set_Timer0_Count_Buffer(Count_Buffer);     // ]w顶计
2921   1          Set_Timer0_Compare_Buffer(Compare_Buffer); // DUTY
2922   1      
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 49  

2923   1          if (on_off == 1) {
2924   2              Start_PWM0();
2925   2          }
2926   1          if (on_off == 0) {
2927   2              Stop_PWM0();
2928   2          }
2929   1      }
2930          
2931          void PWM1(
2932              unsigned char on_off // on_off = 1 ,enable PWM, on_off = 0 , disable PWM.
2933              ,
2934              unsigned char Clock_Divided // divided PWM clock, only 0~3(1,1/2,1/4,1/8)
2935              ,
2936              unsigned char Prescalar // Prescaler : only 1~256
2937              ,
2938              unsigned short Count_Buffer // Count_Buffer : set PWM output period time
2939              ,
2940              unsigned short Compare_Buffer // Compare_Buffer : set PWM output high level time(Duty cycle)
2941              /*Such as the following formula :
2942              PWM CLK = (Core CLK / Prescalar ) /2^ divided clock
2943              PWM output period = (Count Buffer + 1) x PWM CLK time
2944              PWM output high level time = (Compare Buffer + 1) x PWM CLK time */
2945          )
2946          {
2947   1          Select_PWM1();
2948   1          Set_PWM_Prescaler_1_to_256(Prescalar);
2949   1      
2950   1          if (Clock_Divided == 0) {
2951   2              Select_PWM1_Clock_Divided_By_1();
2952   2          }
2953   1          if (Clock_Divided == 1) {
2954   2              Select_PWM1_Clock_Divided_By_2();
2955   2          }
2956   1          if (Clock_Divided == 2) {
2957   2              Select_PWM1_Clock_Divided_By_4();
2958   2          }
2959   1          if (Clock_Divided == 3) {
2960   2              Select_PWM1_Clock_Divided_By_8();
2961   2          }
2962   1      
2963   1          Set_Timer1_Count_Buffer(Count_Buffer);     // ]w顶计
2964   1          Set_Timer1_Compare_Buffer(Compare_Buffer); // DUTY
2965   1      
2966   1          if (on_off == 1) {
2967   2              Start_PWM1();
2968   2          }
2969   1          if (on_off == 0) {
2970   2              Stop_PWM1();
2971   2          }
2972   1      }
2973          
2974          // Note. this API does not support the case that MCU=16bit, 24bpp and mode1
2975          void putPixel(
2976              unsigned short x // x of coordinate
2977              ,
2978              unsigned short y // y of coordinate
2979              ,
2980              unsigned long color
2981              /*color : 8bpp:R3G3B2
2982              16bpp:R5G6B5
2983              24bpp:R8G8B8 */
2984          )
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 50  

2985          
2986          {
2987   1      
2988   1          Goto_Pixel_XY(x, y);
2989   1          LCD_CmdWrite(0x04);
2990   1          Check_Mem_WR_FIFO_not_Full();
2991   1      
2992   1      #ifdef MCU_8bit_ColorDepth_8bpp
                  LCD_DataWrite(color);
              #endif
2995   1      #ifdef MCU_8bit_ColorDepth_16bpp
                  LCD_DataWrite(color);
                  Check_Mem_WR_FIFO_not_Full();
                  LCD_DataWrite(color >> 8);
              #endif
3000   1      #ifdef MCU_8bit_ColorDepth_24bpp
3001   1          LCD_DataWrite(color);
3002   1          Check_Mem_WR_FIFO_not_Full();
3003   1          LCD_DataWrite(color >> 8);
3004   1          Check_Mem_WR_FIFO_not_Full();
3005   1          LCD_DataWrite(color >> 16);
3006   1      #endif
3007   1      #ifdef MCU_16bit_ColorDepth_16bpp
                  LCD_DataWrite(color);
              #endif
3010   1      #ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
                  LCD_DataWrite(color);
                  Check_Mem_WR_FIFO_not_Full();
                  LCD_DataWrite(color >> 16);
              #endif
3015   1      }
3016          
3017          
3018          /////********************************
3019          /*
3020          BUS : select SPI Master bus 0 or 1
3021          SCS : select SPI Master bus 0~3
3022          buffer : AVI Shadow buffer
3023          SCK_Divide : Media CLK = CORE CLK / (2^SCK_Divide) , Media CLK <= 60MHz (range : 0~2)
3024          */
3025          /////********************************
3026          //void SPI_NAND_initial_JPG_AVI(
3027          //    unsigned char BUS // BUS : 0 = Use BUS0, 1 = Use BUS1
3028          //    ,
3029          //    unsigned char SCS // SCS : 0 = Use SCS0, 1 = Use SCS1 ,2 = Use SCS2 ,3 = Use SCS3
3030          //    ,
3031          //    unsigned char SCK_Divide // media decode divide : IDEC Clock = CORE CLK/2^SCK_Divide ,range:0~3, rec
             -ommend <= 60MHz
3032          //)
3033          //{
3034          //    Enable_SFlash_SPI();
3035          //    SPI_Master_LatchEdge_Select_Falling();
3036          //    SPIM_Clock_Divided_1();
3037          //    IDEC_SPI_Clock_Divide(SCK_Divide);
3038          //    SPI_Clock_Period(2);
3039          
3040          //    switch (BUS) {
3041          //        case 0:
3042          //            IDEC_Select_Bus_0(); // MEDIA BUS 0
3043          //            SPIM_Select_Bus_0();
3044          //            break;
3045          
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 51  

3046          //        case 1:
3047          //            IDEC_Select_Bus_1(); // MEDIA BUS 1
3048          //            SPIM_Select_Bus_1();
3049          //            break;
3050          //    }
3051          
3052          //    switch (SCS) {
3053          //        case 0:
3054          //            IDEC_Select_SFI_0(); // MEDIA CS0
3055          //            Select_nSS_drive_on_xnsfcs0();
3056          //            break;
3057          
3058          //        case 1:
3059          //            IDEC_Select_SFI_1(); // MEDIA CS1
3060          //            Select_nSS_drive_on_xnsfcs1();
3061          //            break;
3062          
3063          //        case 2:
3064          //            IDEC_Select_SFI_2(); // MEDIA CS2
3065          //            Select_nSS_drive_on_xnsfcs2();
3066          //            break;
3067          
3068          //        case 3:
3069          //            IDEC_Select_SFI_3(); // MEDIA CS3
3070          //            Select_nSS_drive_on_xnsfcs3();
3071          //            break;
3072          //    }
3073          
3074          //    Reset_CPOL();
3075          //    // Set_CPOL();
3076          //    Reset_CPHA();
3077          //    // Set_CPHA();
3078          
3079          //    W25N01_Device_Reset();
3080          //    W25N01_Clear_BUF();
3081          //    W25N01_Set_ECC();
3082          
3083          //    IDEC_Select_SFI_24bit_Address();
3084          //    IDEC_Select_RA8875_SPI_Mode0_and_Mode3();
3085          //    IDEC_Select_SFI_Quad_Mode_Dummy_8T_6Bh(); // MEDIA QUAD MODE
3086          //    // IDEC_Select_SFI_Quad_Mode_Dummy_4T_EBh();
3087          
3088          //    IDEC_AVI_Decoding_to_PIP1_and_Shadow();
3089          //}
3090          
3091          /////********************************
3092          /*
3093          BUS : select SPI Master bus 0 or 1
3094          SCS : select SPI Master bus 0~3
3095          SCK_Divide : Media CLK = CORE CLK / (2^SCK_Divide) , Media CLK <= 60MHz
3096          */
3097          /////********************************
3098          //void SPI_NAND_initial_DMA(
3099          //    unsigned char SCS // SCS : 0 = Use SCS0, 1 = Use SCS1 ,2 = Use SCS2 ,3 = Use SCS3
3100          //    ,
3101          //    unsigned char BUS // BUS : 0 = Use BUS0, 1 = Use BUS1
3102          //)
3103          //{
3104          //    Enable_SFlash_SPI();
3105          //    SPI_Master_LatchEdge_Select_Falling();
3106          //    SPIM_Clock_Divided_1();
3107          //    SPI_Clock_Period(2);
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 52  

3108          
3109          //    switch (BUS) {
3110          //        case 0:
3111          //            SPIM_Select_Bus_0();
3112          //            FONT_DMA_Select_Bus_0();
3113          //            break;
3114          
3115          //        case 1:
3116          //            SPIM_Select_Bus_1();
3117          //            FONT_DMA_Select_Bus_1();
3118          //            break;
3119          //    }
3120          
3121          //    switch (SCS) {
3122          //        case 0:
3123          //            Select_nSS_drive_on_xnsfcs0();
3124          //            Select_SFI_0();
3125          //            break;
3126          
3127          //        case 1:
3128          //            Select_nSS_drive_on_xnsfcs1();
3129          //            Select_SFI_1();
3130          //            break;
3131          
3132          //        case 2:
3133          //            Select_nSS_drive_on_xnsfcs2();
3134          //            Select_SFI_2();
3135          //            break;
3136          
3137          //        case 3:
3138          //            Select_nSS_drive_on_xnsfcs3();
3139          //            Select_SFI_3();
3140          //            break;
3141          //    }
3142          
3143          //    Reset_CPOL();
3144          //    // Set_CPOL();
3145          //    Reset_CPHA();
3146          //    // Set_CPHA();
3147          
3148          //    W25N01_Device_Reset();
3149          //    W25N01_Clear_BUF();
3150          //    W25N01_Set_ECC();
3151          
3152          //    // Select_standard_SPI_Mode0_or_Mode3();
3153          //    Select_RA8875_SPI_Mode0_and_Mode3();
3154          
3155          //    //  Select_SFI_Single_Mode_Dummy_0T_03h();
3156          //    //  Select_SFI_Single_Mode_Dummy_8T_0Bh();
3157          //    //  Select_SFI_Single_Mode_Dummy_16T_1Bh();
3158          //    //  Select_SFI_Dual_Mode_Dummy_8T_3Bh();
3159          //    //  Select_SFI_Dual_Mode_Dummy_4T_BBh();
3160          //    Select_SFI_Quad_Mode_Dummy_8T_6Bh();
3161          
3162          //    Select_SFI_DMA_Mode();
3163          //    Select_SFI_24bit_Address();
3164          //}
3165          
3166          /////********************************
3167          /*
3168          addr : Pic addr in flash
3169          JPGsize : Pic size
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 53  

3170          x : write pic coordinate of x
3171          y : write pic coordinate of y
3172          */
3173          /////********************************
3174          //void JPG_NAND(
3175          //    unsigned long addr // Pic addr in flash
3176          //    ,
3177          //    unsigned long JPGsize // Pic size
3178          //    ,
3179          //    unsigned long IDEC_canvas_width // recommend = canvas_image_width
3180          //    ,
3181          //    unsigned short x // write pic coordinate of x
3182          //    ,
3183          //    unsigned short y // write pic coordinate of y
3184          //)
3185          //{
3186          //    IDEC_Destination_Image_Width(IDEC_canvas_width);
3187          //    IDEC_Destination_Upper_Left_Corner(x, y);
3188          
3189          //    nSS_Active();
3190          //    SPI_Master_FIFO_Data_Put(0x13);      // page data read(13h)
3191          //    SPI_Master_FIFO_Data_Put(0x00);      // 8Dummy clock
3192          //    SPI_Master_FIFO_Data_Put(addr >> 8); // page address MSB
3193          //    SPI_Master_FIFO_Data_Put(addr);      // page address LSB
3194          //    nSS_Inactive();
3195          //    delay_ms(1); // delay for buffer load
3196          
3197          //    IDEC_Source_Start_Address(addr); // JPG_cl|i}
3198          //    IDEC_Transfer_Number(JPGsize);   // JPG SIZE
3199          //    IDEC_Starts_Decoding();          //?}cl?NJPG
3200          //    Check_Busy_Media_Decode();
3201          //}
3202          
3203          /////********************************
3204          /*
3205          addr : vedio addr in flash
3206          vediosize : vedio size
3207          x : show vedio coordinate of x
3208          y : show vedio coordinate of y
3209          height : vedio height
3210          width : vedio width
3211          */
3212          /////********************************
3213          //void AVI_NAND(
3214          //    unsigned long addr // vedio addr in flash
3215          //    ,
3216          //    unsigned long videosize // vedio size
3217          //    ,
3218          //    unsigned long shadow_buffer_addr // shadow buffer addr
3219          //    ,
3220          //    unsigned long PIP_buffer_addr // PIP buffer addr
3221          //    ,
3222          //    unsigned long x // show vedio coordinate of x
3223          //    ,
3224          //    unsigned long y // show vedio coordinate of y
3225          //    ,
3226          //    unsigned long height // vedio height
3227          //    ,
3228          //    unsigned long width // vedio width
3229          //    ,
3230          //    unsigned long PIP_canvas_Width // recommend = canvas_image_width
3231          //)
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 54  

3232          //{
3233          //    nSS_Active();
3234          //    SPI_Master_FIFO_Data_Put(0x13);      // page data read(13h)
3235          //    SPI_Master_FIFO_Data_Put(0x00);      // 8Dummy clock
3236          //    SPI_Master_FIFO_Data_Put(addr >> 8); // page address MSB
3237          //    SPI_Master_FIFO_Data_Put(addr);      // page address LSB
3238          //    nSS_Inactive();
3239          //    delay_ms(1); // delay for buffer load
3240          
3241          //    IDEC_Source_Start_Address(addr);
3242          //    IDEC_Transfer_Number(videosize); // AVI File Size
3243          //    AVI_Shadow_PIP_Start_Address(shadow_buffer_addr);
3244          
3245          //    Select_PIP1_Parameter();
3246          //    PIP_Image_Start_Address(PIP_buffer_addr);
3247          //    PIP_Display_Start_XY(x, y);
3248          //    PIP_Image_Width(PIP_canvas_Width);
3249          //    PIP_Window_Image_Start_XY(0, 0);
3250          //    PIP_Window_Width_Height(width, height);
3251          //    //  Enable_PIP1();
3252          
3253          //    // Check_Vsync_finished();
3254          //    IDEC_Starts_Decoding();
3255          //    // Check_Busy_Media_Decode();
3256          //}
3257          
3258          void AVI_window(
3259              unsigned char ON_OFF // 0 : turn off AVI window, 1 :turn on AVI window
3260          )
3261          {
3262   1          if (ON_OFF == 0) {
3263   2              Disable_PIP1();
3264   2          }
3265   1          if (ON_OFF == 1) {
3266   2              Enable_PIP1();
3267   2          }
3268   1      }
3269          
3270          /*
3271          PNG PIC : A(8)R(8)G(8)B(8) = 32bits
3272          For BTE_alpha_blending_32bit_Pixel_mode
3273          dma_page_addr : pic addr
3274          pic_buffer_Layer : read pic buffer in sdram
3275          Show_pic_Layer : show pic layer
3276          */
3277          //void SPI_NAND_DMA_png(
3278          //    unsigned long dma_page_addr // dma pic addr in flash
3279          //    ,
3280          //    unsigned long pic_buffer_Layer // pic_buffer_Layer : read pic buffer in sdram
3281          //    ,
3282          //    unsigned long Show_pic_Layer // Show_pic_Layer : write pic into sdram addr
3283          //    ,
3284          //    unsigned int picture_Width, unsigned int picture_Height)
3285          //{
3286          
3287          //    nSS_Active();
3288          //    SPI_Master_FIFO_Data_Put(0x13);                 // page data read(13h)
3289          //    SPI_Master_FIFO_Data_Put(0x00);                 // 8Dummy clock
3290          //    SPI_Master_FIFO_Data_Put((dma_page_addr) >> 8); // page address MSB
3291          //    SPI_Master_FIFO_Data_Put(dma_page_addr);        // page address LSB
3292          //    nSS_Inactive();
3293          //    delay_ms(1); // delay for buffer load
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 55  

3294          
3295          //    Memory_Linear_Mode();
3296          
3297          //    SFI_DMA_Transfer_Number(picture_Width * picture_Height * 4); // picture Width x Height x Color depth
             -(32bit = 4byte)
3298          //    SFI_DMA_Destination_Start_Address(pic_buffer_Layer);         //
3299          
3300          //    Start_SFI_DMA();
3301          //    Check_2D_Busy();
3302          //    Memory_XY_Mode();
3303          //}
3304          
3305          void SPI_NOR_DMA_png(
3306              unsigned long dma_page_addr // dma pic addr in flash
3307              ,
3308              unsigned long pic_buffer_Layer // pic_buffer_Layer : read pic buffer in sdram
3309              ,
3310              unsigned long Show_pic_Layer // Show_pic_Layer : write pic into sdram addr
3311              ,
3312              unsigned long picture_Width, unsigned long picture_Height)
3313          {
3314   1          Memory_Linear_Mode();
3315   1          SFI_DMA_Source_Start_Address(dma_page_addr);
3316   1          SFI_DMA_Transfer_Number(picture_Width * picture_Height * 4); // picture Width x Height x Color depth(3
             -2bit = 4byte)
3317   1          SFI_DMA_Destination_Start_Address(pic_buffer_Layer);         //
3318   1      
3319   1          Start_SFI_DMA();
3320   1          Check_2D_Busy();
3321   1          Memory_XY_Mode();
3322   1      }
*** WARNING C280 IN LINE 3310 OF RA8889_01_Kernel\RA8889_API_51.c: 'Show_pic_Layer': unreferenced local variable
3323          
3324          /*
3325          dma_page_addr : pic addr
3326          pic_buffer_Layer : read pic buffer in sdram
3327          Show_pic_Layer : show pic layer
3328          X_coordinate : write to sdram coordinate of x
3329          Y_coordinate : write to sdram coordinate of y
3330          chorma : 0 = no transparent ,1 : Specify a color as transparent
3331          Background_color : transparent color
3332          */
3333          //void SPI_NAND_DMA(
3334          //    unsigned long dma_page_addr // dma pic addr in flash
3335          //    ,
3336          //    unsigned long X_coordinate // pic write to sdram coordinate of x
3337          //    ,
3338          //    unsigned long Y_coordinate // pic write to sdram coordinate of y
3339          //    ,
3340          //    unsigned long des_canvas_width // recommend = canvas_image_width
3341          //    ,
3342          //    unsigned int picture_Width, unsigned int picture_Height, unsigned long pic_buffer_Layer // pic_buffe
             -r_Layer : read pic buffer in sdram
3343          //    ,
3344          //    unsigned long Show_pic_Layer // Show_pic_Layer : write pic into sdram addr
3345          //    ,
3346          //    unsigned char chorma // 0: no transparent,1:Specify a color as transparent
3347          //    ,
3348          //    unsigned long Background_color // transparent color
3349          //)
3350          //{
3351          
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 56  

3352          //#ifdef MCU_8bit_ColorDepth_8bpp
3353          //    Background_color_256(Background_color);
3354          //#endif
3355          //#ifdef MCU_8bit_ColorDepth_16bpp
3356          //    Background_color_65k(Background_color);
3357          //#endif
3358          //#ifdef MCU_8bit_ColorDepth_24bpp
3359          //    Background_color_16M(Background_color);
3360          //#endif
3361          //#ifdef MCU_16bit_ColorDepth_16bpp
3362          //    Background_color_65k(Background_color);
3363          //#endif
3364          //#ifdef MCU_16bit_ColorDepth_24bpp_Mode_1
3365          //    Background_color_16M(Background_color);
3366          //#endif
3367          //#ifdef MCU_16bit_ColorDepth_24bpp_Mode_2
3368          //    Background_color_16M(Background_color);
3369          //#endif
3370          
3371          //    nSS_Active();
3372          //    SPI_Master_FIFO_Data_Put(0x13);                 // page data read(13h)
3373          //    SPI_Master_FIFO_Data_Put(0x00);                 // 8Dummy clock
3374          //    SPI_Master_FIFO_Data_Put((dma_page_addr) >> 8); // page address MSB
3375          //    SPI_Master_FIFO_Data_Put(dma_page_addr);        // page address LSB
3376          //    nSS_Inactive();
3377          //    delay_ms(1); // delay for buffer load
3378          
3379          //    Memory_Linear_Mode();
3380          //    SFI_DMA_Source_Start_Address(dma_page_addr); // 24bit address
3381          
3382          //#if defined MCU_8bit_ColorDepth_8bpp
3383          //    SFI_DMA_Transfer_Number(picture_Width * picture_Height); // picture Width x Height x Color depth(8/8
             -=1)
3384          //#endif
3385          //#if defined MCU_8bit_ColorDepth_16bpp
3386          //    SFI_DMA_Transfer_Number(picture_Width * picture_Height * 2); // picture Width x Height x Color depth
             -(16/8=2)
3387          //#endif
3388          //#if defined MCU_16bit_ColorDepth_16bpp
3389          //    SFI_DMA_Transfer_Number(picture_Width * picture_Height * 2); // picture Width x Height x Color depth
             -(16/8=2)
3390          //#endif
3391          //#if defined MCU_8bit_ColorDepth_24bpp
3392          //    SFI_DMA_Transfer_Number(picture_Width * picture_Height * 3); // picture Width x Height x Color depth
             -(24/8=3)
3393          //#endif
3394          //#if defined MCU_16bit_ColorDepth_24bpp_Mode_1
3395          //    SFI_DMA_Transfer_Number(picture_Width * picture_Height * 3); // picture Width x Height x Color depth
             -(24/8=3)
3396          //#endif
3397          //#if defined MCU_16bit_ColorDepth_24bpp_Mode_2
3398          //    SFI_DMA_Transfer_Number(picture_Width * picture_Height * 3); // picture Width x Height x Color depth
             -(24/8=3)
3399          //#endif
3400          
3401          //    SFI_DMA_Destination_Start_Address(pic_buffer_Layer); // DMA to Memory Address 1280*480*3
3402          
3403          //    Start_SFI_DMA();
3404          //    // Check_Busy_SFI_DMA();
3405          //    Check_2D_Busy();
3406          
3407          //    BTE_S0_Color_24bpp();
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 57  

3408          //    BTE_S0_Memory_Start_Address(pic_buffer_Layer); // S0 Address 1280*480*3
3409          //    BTE_S0_Image_Width(picture_Width);
3410          //    BTE_S0_Window_Start_XY(0, 0);
3411          
3412          //    BTE_Destination_Color_24bpp();
3413          //    BTE_Destination_Memory_Start_Address(Show_pic_Layer);
3414          //    BTE_Destination_Image_Width(des_canvas_width);
3415          //    BTE_Destination_Window_Start_XY(X_coordinate, Y_coordinate);
3416          
3417          //    if (chorma == 0) {
3418          //        BTE_ROP_Code(12);
3419          //        BTE_Operation_Code(0x02);
3420          //    }
3421          //    if (chorma == 1) {
3422          //        BTE_Operation_Code(0x05);
3423          //    }
3424          
3425          //    BTE_Window_Size(picture_Width, picture_Height);
3426          
3427          //    BTE_Enable();
3428          
3429          //    Check_BTE_Busy();
3430          
3431          //    Memory_XY_Mode();
3432          //}
3433          
3434          
3435          /*
3436          S0_Addr : Source 0 Start address
3437          S0_W : Source 0 image width(recommend = canvas image width) 
3438          XS0 : Source 0 coordinate of X
3439          YS0 : Source 0 coordinate of Y
3440          S1_Addr : Source 1 Start address
3441          S1_W : Source 1 image width(recommend = canvas image width) 
3442          XS1 : Source 1 coordinate of X
3443          YS1 : Source 1 coordinate of Y
3444          Des_Addr : Destination start address
3445          Des_W :  Destination image width(recommend = canvas image width) 
3446          XDes : Destination coordinate of X
3447          YDes : Destination coordinate of Y
3448          X_W : BTE Window Size of X
3449          Y_H : BTE Window Size of Y
3450          */
3451          void BTE_alpha_blending_24bit_Pixel_mode(unsigned long S0_Addr,unsigned short S0_W,unsigned short XS0,unsi
             -gned short YS0,unsigned long S1_Addr,unsigned short S1_W,unsigned short XS1,unsigned short YS1,unsigned long Des_Addr,un
             -signed short Des_W, unsigned short XDes,unsigned short YDes,unsigned short X_W,unsigned short Y_H)
3452          {
3453   1        BTE_S0_Color_24bpp();                             //S0的色深选择
3454   1        BTE_S0_Memory_Start_Address(S0_Addr);
3455   1        BTE_S0_Image_Width(S0_W);
3456   1        BTE_S0_Window_Start_XY(XS0,YS0);                  //S0与Des位置设定一样
3457   1      
3458   1        BTE_S1_Color_16bit_Alpha();                       //选用16bpp，固定不变
3459   1        BTE_S1_Memory_Start_Address(S1_Addr);
3460   1        BTE_S1_Image_Width(S1_W); 
3461   1        BTE_S1_Window_Start_XY(XS1,YS1);
3462   1        
3463   1        BTE_Destination_Color_24bpp();                    //Des的色深选择
3464   1        BTE_Destination_Memory_Start_Address(Des_Addr);
3465   1        BTE_Destination_Image_Width(Des_W);
3466   1        BTE_Destination_Window_Start_XY(XDes,YDes);
3467   1      
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 58  

3468   1        BTE_Window_Size(X_W,Y_H);
3469   1        BTE_Operation_Code(0x0A);   //BTE Operation: Memory write with opacity (w/o ROP)
3470   1        BTE_Enable();
3471   1        Check_BTE_Busy();
3472   1      }
3473          
3474          
3475          /*
3476          use for linear mode ,nand flash,
3477          BTE_X : BTE window Width
3478          BTE_Y : BTE window Height
3479          S0X : source 0 coordinate of x
3480          S0Y : source 0 coordinate of y
3481          desX :destination coordinate of x
3482          desY :destination coordinate of y
3483          pic_buffer_Layer : read pic buffer addr in sdram
3484          */
3485          void BTE_alpha_blending_32bit_Pixel_mode(
3486              unsigned int picture_Width // pic width
3487              ,
3488              unsigned int BTE_X // BTE window Width
3489              ,
3490              unsigned int BTE_Y // BTE window Height
3491              ,
3492              unsigned long S0X // source 0 coordinate of x
3493              ,
3494              unsigned long S0Y // source 0 coordinate of y
3495              ,
3496              unsigned long S0_Start_Addr // source 0 start addr
3497              ,
3498              unsigned long S0_canvas_width // recomamnd = canvas_image_width
3499              ,
3500              unsigned long desX // Destination coordinate of x
3501              ,
3502              unsigned long desY // Destination coordinate of y
3503              ,
3504              unsigned long DES_Start_Addr // Destination start addr
3505              ,
3506              unsigned long DES_canvas_width // recomamnd = canvas_image_width
3507              ,
3508              unsigned long pic_buffer_Layer // source 1 pic addr
3509          )
3510          {
3511   1          BTE_S0_Color_24bpp();
3512   1          BTE_S0_Memory_Start_Address(S0_Start_Addr);
3513   1          BTE_S0_Image_Width(S0_canvas_width);
3514   1      
3515   1          BTE_S1_Color_32bit_Alpha();
3516   1          BTE_S1_Memory_Start_Address(pic_buffer_Layer);
3517   1          BTE_S1_Image_Width(picture_Width); // ARGB
3518   1      
3519   1          BTE_Destination_Color_24bpp();
3520   1          BTE_Destination_Memory_Start_Address(DES_Start_Addr);
3521   1          BTE_Destination_Image_Width(DES_canvas_width);
3522   1      
3523   1          BTE_S1_Window_Start_XY(0, 0);
3524   1          BTE_S0_Window_Start_XY(S0X, S0Y);
3525   1          BTE_Destination_Window_Start_XY(desX, desY);
3526   1          BTE_Window_Size(BTE_X, BTE_Y);
3527   1          BTE_ROP_Code(12);
3528   1          BTE_Operation_Code(0x0A);
3529   1          BTE_Enable();
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 59  

3530   1          Check_BTE_Busy();
3531   1      
3532   1          BTE_S1_Color_24bpp();
3533   1      }
3534          
3535          void SPI_NOR_Flash_switch_QUAD_MODE(
3536              unsigned char BUS /*select SPI Bus 0 or 1*/
3537              ,
3538              unsigned char SCS /*select SPI CS 0~3*/
3539              ,
3540              unsigned char flash /*select flash: 0 =MXIC , 1=WINBOND*/
3541          )
3542          
3543          {
3544   1          unsigned char temp;
3545   1      
3546   1          Enable_SFlash_SPI();
3547   1          SPI_Master_LatchEdge_Select_Falling();
3548   1          SPIM_Clock_Divided_1();
3549   1          SPI_Clock_Period(2);
3550   1      
3551   1          switch (BUS) {
3552   2              case 0:
3553   2                  SPIM_Select_Bus_0();
3554   2                  break;
3555   2              case 1:
3556   2                  SPIM_Select_Bus_1();
3557   2                  break;
3558   2          }
3559   1      
3560   1          switch (SCS) {
3561   2              case 0:
3562   2                  Select_nSS_drive_on_xnsfcs0();
3563   2                  break;
3564   2      
3565   2              case 1:
3566   2                  Select_nSS_drive_on_xnsfcs1();
3567   2                  break;
3568   2      
3569   2              case 2:
3570   2                  Select_nSS_drive_on_xnsfcs2();
3571   2                  break;
3572   2      
3573   2              case 3:
3574   2                  Select_nSS_drive_on_xnsfcs3();
3575   2                  break;
3576   2          }
3577   1      
3578   1          Reset_CPOL();
3579   1          // Set_CPOL();
3580   1          Reset_CPHA();
3581   1          // Set_CPHA();
3582   1      
3583   1          // WREN : write enable
3584   1          nSS_Active();
3585   1          SPI_Master_FIFO_Data_Put(0x06);
3586   1          nSS_Inactive();
3587   1      
3588   1          // RDSR : check writable
3589   1      
3590   1          do {
3591   2              nSS_Active();
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 60  

3592   2              SPI_Master_FIFO_Data_Put(0x05); //
3593   2              temp = SPI_Master_FIFO_Data_Put(0xff);
3594   2              nSS_Inactive();
3595   2              delay_ms(1);
3596   2          } while ((temp & 0x02) == 0x00); // WEL=1 ? WRITABLE : UNWRITABLE
3597   1      
3598   1          switch (flash) {
3599   2              case 0:
3600   2                  //**********************************MXIC Flash Quad mode
3601   2                  // WRITE STATUS REG
3602   2                  nSS_Active();
3603   2                  SPI_Master_FIFO_Data_Put(0x01);
3604   2                  SPI_Master_FIFO_Data_Put(0x40);
3605   2                  nSS_Inactive();
3606   2                  ///*************************************
3607   2                  break;
3608   2      
3609   2              case 1:
3610   2                  //******************************Winbond Flash Quad mode
3611   2                  // WRITE STATUS REG
3612   2                  nSS_Active();
3613   2                  SPI_Master_FIFO_Data_Put(0x31); // Status Register-2
3614   2                  SPI_Master_FIFO_Data_Put(0x02); // QE=1, Quad Mode
3615   2                  nSS_Inactive();
3616   2                  ///*****************************
3617   2                  break;
3618   2              case 2:
3619   2                  //******************************GD Flash Quad mode---DEBUGING.
3620   2                  // WRITE STATUS REG
3621   2                  nSS_Active();
3622   2                  SPI_Master_FIFO_Data_Put(0x01);
3623   2                  SPI_Master_FIFO_Data_Put(0x31); // Status Register-2
3624   2                  SPI_Master_FIFO_Data_Put(0x38);
3625   2                  nSS_Inactive();
3626   2                  ///*****************************
3627   2                  break;
3628   2      
3629   2          }
3630   1      
3631   1          // check flash busy
3632   1          do {
3633   2              // RDSR
3634   2              nSS_Active();
3635   2              SPI_Master_FIFO_Data_Put(0x05); //
3636   2              temp = SPI_Master_FIFO_Data_Put(0xff);
3637   2              nSS_Inactive();
3638   2          } while ((temp & 0x01) == 0x01); // WIP=1 ? BUSY:IDLE
3639   1      }
3640          
3641          void SPI_NOR_initial_DMA(
3642              unsigned char mode // SPI mode : 0:Single_03h,1:Single_0Bh,2:Single_1Bh,3:Dual_3Bh,4:Dual_BBh,5:Quad_6
             -Bh,6:Quad_EBh
3643              ,
3644              unsigned char BUS // BUS : 0 = Use BUS0, 1 = Use BUS1
3645              ,
3646              unsigned char SCS // SCS : 0 = Use SCS0, 1 = Use SCS1 ,2 = Use SCS2 ,3 = Use SCS3
3647              ,
3648              unsigned char flash // 0 : MXIC , 1 : Winbond
3649              ,
3650              unsigned char addr_24b_32b // flash 24bit or 32bit addr
3651          )
3652          {
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 61  

3653   1          unsigned char temp;
3654   1      
3655   1          Enable_SFlash_SPI();
3656   1          SPI_Master_LatchEdge_Select_Falling();
3657   1          SPIM_Clock_Divided_1();
3658   1          SPI_Clock_Period(2);
3659   1      
3660   1          switch (BUS) {
3661   2              case 0:
3662   2                  FONT_DMA_Select_Bus_0();
3663   2                  SPIM_Select_Bus_0();
3664   2                  break;
3665   2      
3666   2              case 1:
3667   2                  FONT_DMA_Select_Bus_1();
3668   2                  SPIM_Select_Bus_1();
3669   2                  break;
3670   2          }
3671   1      
3672   1          switch (SCS) {
3673   2              case 0:
3674   2                  Select_SFI_0();
3675   2                  Select_nSS_drive_on_xnsfcs0();
3676   2                  break;
3677   2      
3678   2              case 1:
3679   2                  Select_SFI_1();
3680   2                  Select_nSS_drive_on_xnsfcs1();
3681   2                  break;
3682   2      
3683   2              case 2:
3684   2                  Select_SFI_2();
3685   2                  Select_nSS_drive_on_xnsfcs2();
3686   2                  break;
3687   2      
3688   2              case 3:
3689   2                  Select_SFI_3();
3690   2                  Select_nSS_drive_on_xnsfcs3();
3691   2                  break;
3692   2          }
3693   1      
3694   1          Select_RA8875_SPI_Mode0_and_Mode3();
3695   1      
3696   1          switch (mode) {
3697   2              case 0:
3698   2                  Select_SFI_Single_Mode_Dummy_0T_03h(); // single mode
3699   2                  break;
3700   2      
3701   2              case 1:
3702   2                  Select_SFI_Single_Mode_Dummy_8T_0Bh(); // single mode
3703   2                  break;
3704   2      
3705   2              case 2:
3706   2                  Select_SFI_Single_Mode_Dummy_16T_1Bh(); // single mode
3707   2                  break;
3708   2      
3709   2              case 3:
3710   2                  Select_SFI_Dual_Mode_Dummy_8T_3Bh(); // dual mode
3711   2                  break;
3712   2      
3713   2              case 4:
3714   2                  SPI_NOR_Flash_switch_QUAD_MODE(BUS, SCS, flash); // quad mode
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 62  

3715   2                  Select_SFI_Quad_Mode_Dummy_8T_6Bh();
3716   2                  break;
3717   2      
3718   2              case 5:
3719   2                  SPI_NOR_Flash_switch_QUAD_MODE(BUS, SCS, flash); // quad mode
3720   2                  Select_SFI_Quad_Mode_Dummy_4T_EBh();
3721   2          }
3722   1      
3723   1          Select_SFI_DMA_Mode();
3724   1      
3725   1          if (addr_24b_32b == 0)
3726   1              Select_SFI_24bit_Address();
3727   1          else {
3728   2              switch_24bits_to_32bits(BUS, SCS);
3729   2              Select_SFI_32bit_Address();
3730   2          }
3731   1          Memory_XY_Mode();
3732   1          delay_ms(30);
3733   1      }
*** WARNING C280 IN LINE 3653 OF RA8889_01_Kernel\RA8889_API_51.c: 'temp': unreferenced local variable
3734          
3735          void SPI_NOR_initial_JPG_AVI(
3736              unsigned char flash // 0 : MXIC , 1 : Winbond
3737              ,
3738              unsigned char addr_24b_32b // flash addr : 0:24bit addr, 1:32bit addr
3739              ,
3740              unsigned char BUS // BUS : 0 = Use BUS0, 1 = Use BUS1
3741              ,
3742              unsigned char SCS // SCS : 0 = Use SCS0, 1 = Use SCS1 ,2 = Use SCS2 ,3 = Use SCS3
3743              ,
3744              unsigned char SCK_Divide // media decode divide : IDEC Clock = CORE CLK/2^SCK_Divide ,range:0~3, recom
             -mend <= 60MHz
3745          )
3746          {
3747   1          unsigned char temp;
3748   1      
3749   1          Enable_SFlash_SPI();
3750   1          SPI_Master_LatchEdge_Select_Falling();
3751   1          SPIM_Clock_Divided_1();
3752   1          IDEC_SPI_Clock_Divide(SCK_Divide);
3753   1          SPI_Clock_Period(2);
3754   1      
3755   1          switch (BUS) {
3756   2              case 0:
3757   2                  IDEC_Select_Bus_0(); // MEDIA ?I?IBUS 0
3758   2                  SPIM_Select_Bus_0();
3759   2                  break;
3760   2              case 1:
3761   2                  IDEC_Select_Bus_1(); // MEDIA ?I?IBUS 1
3762   2                  SPIM_Select_Bus_1();
3763   2                  break;
3764   2          }
3765   1      
3766   1          switch (SCS) {
3767   2              case 0:
3768   2                  IDEC_Select_SFI_0(); // MEDIA?I?ICS0
3769   2                  Select_nSS_drive_on_xnsfcs0();
3770   2                  break;
3771   2      
3772   2              case 1:
3773   2                  IDEC_Select_SFI_1(); // MEDIA?I?ICS1
3774   2                  Select_nSS_drive_on_xnsfcs1();
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 63  

3775   2                  break;
3776   2      
3777   2              case 2:
3778   2                  IDEC_Select_SFI_2(); // MEDIA?I?ICS2
3779   2                  Select_nSS_drive_on_xnsfcs2();
3780   2                  break;
3781   2      
3782   2              case 3:
3783   2                  IDEC_Select_SFI_3(); // MEDIA?I?ICS3
3784   2                  Select_nSS_drive_on_xnsfcs3();
3785   2                  break;
3786   2          }
3787   1      
3788   1          SPI_NOR_Flash_switch_QUAD_MODE(BUS, SCS, flash); // Into Quad Mode
3789   1      
3790   1          if (addr_24b_32b == 0)
3791   1              IDEC_Select_SFI_24bit_Address();
3792   1          else {
3793   2              switch_24bits_to_32bits(BUS, SCS);
3794   2              IDEC_Select_SFI_32bit_Address();
3795   2          }
3796   1      
3797   1          IDEC_Select_RA8875_SPI_Mode0_and_Mode3();
3798   1          IDEC_Select_SFI_Quad_Mode_Dummy_8T_6Bh(); // MEDIA QUAD MODE
3799   1          // IDEC_Select_SFI_Quad_Mode_Dummy_4T_EBh();
3800   1      
3801   1          IDEC_AVI_Decoding_to_PIP1_and_Shadow();
3802   1      }
*** WARNING C280 IN LINE 3747 OF RA8889_01_Kernel\RA8889_API_51.c: 'temp': unreferenced local variable
3803          
3804          void JPG_NOR(
3805              unsigned long addr // JPG pic addr in flash
3806              ,
3807              unsigned long JPGsize // JPG pic size
3808              ,
3809              unsigned long IDEC_canvas_width // recommend = canvas_image_width
3810              ,
3811              unsigned short x // JPG pic write to sdram coordinate of x
3812              ,
3813              unsigned short y // JPG pic write to sdram coordinate of y
3814          )
3815          {
3816   1      
3817   1          IDEC_Destination_Image_Width(IDEC_canvas_width);
3818   1          IDEC_Destination_Upper_Left_Corner(x, y);
3819   1      
3820   1          IDEC_Source_Start_Address(addr); // JPG_cl|i}
3821   1          IDEC_Transfer_Number(JPGsize);   // JPG SIZE
3822   1          IDEC_Starts_Decoding();          //?}cl?NJPG
3823   1          Check_Busy_Media_Decode();
3824   1      }
3825          
3826          void AVI_NOR(
3827              unsigned long addr // AVI addr in flash
3828              ,
3829              unsigned long videosize // video size
3830              ,
3831              unsigned long shadow_buffer_addr // shadow buffer addr
3832              ,
3833              unsigned long PIP_buffer_addr // PIP buffer addr
3834              ,
3835              unsigned long x // show AVI to coordinate of x
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 64  

3836              ,
3837              unsigned long y // show AVI to coordinate of y
3838              ,
3839              unsigned long height // vedio height
3840              ,
3841              unsigned long width // vedio width
3842              ,
3843              unsigned long PIP_width // PIP Image width, recommend = canvas_image_width
3844          )
3845          {
3846   1      
3847   1          IDEC_Source_Start_Address(addr);
3848   1          IDEC_Transfer_Number(videosize); // AVI File Size
3849   1      
3850   1          AVI_Shadow_PIP_Start_Address(shadow_buffer_addr);
3851   1      
3852   1          Select_PIP1_Parameter();
3853   1      
3854   1          PIP_Image_Start_Address(PIP_buffer_addr);
3855   1          PIP_Display_Start_XY(x, y);
3856   1          PIP_Image_Width(PIP_width);
3857   1          PIP_Window_Image_Start_XY(0, 0);
3858   1          PIP_Window_Width_Height(width, height);
3859   1          //  Enable_PIP1();
3860   1          // Check_Vsync_finished();
3861   1          IDEC_Starts_Decoding();
3862   1          // Check_Busy_Media_Decode();
3863   1      }
3864          
3865          void Print_Hex(unsigned char buf)
3866          {
3867   1          unsigned char temp;
3868   1          temp = buf;
3869   1          temp = (temp >> 4) & 0x0F;
3870   1          Text_Mode();
3871   1          LCD_CmdWrite(0x04);
3872   1      
3873   1          if (temp < 0x0A) {
3874   2              temp |= 0x30;
3875   2          } else
3876   1              temp = temp + 0x37;
3877   1          LCD_DataWrite(temp);
3878   1          Check_Mem_WR_FIFO_not_Full();
3879   1          //  delay_ms(1);
3880   1      
3881   1          temp = buf;
3882   1          temp = temp & 0x0F;
3883   1          if (temp < 0x0A) {
3884   2              temp |= 0x30;
3885   2          } else
3886   1              temp = temp + 0x37;
3887   1          LCD_DataWrite(temp);
3888   1          //  delay_ms(1);
3889   1          Check_Mem_WR_FIFO_not_Full();
3890   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5602    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    1203
C51 COMPILER V9.55   RA8889_API_51                                                         07/15/2024 22:22:18 PAGE 65  

   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  28 WARNING(S),  0 ERROR(S)
